<!DOCTYPE html>
<html>
<head>
    <title>Tes Kognitif dan Visual</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="checkbox.css">
    <link rel="stylesheet" href="radio-buttons.css">
    <link rel="stylesheet" href="sidebar.css">
	<link rel="stylesheet" href="pagestyle.css">
	<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js"></script>
	<script src="speech.js"></script>
</head>
<style>
    body {
	    background-color: #a0e0ff;
	}
	#myVideo {
		position: fixed;
		left: 0;
		top: 0;
		/* min-width: 100%; 
		min-height: 100%; */
		max-width: 1920px;
		color: rgba(255,255,255,0.5);
		z-index: -4;
	}
	#background-index3 {
		background-size: cover;
		width: 100%;
	    display: none;
	}
	#background-index4 {
		background-size: cover;
		width: 100%;
	    display: none;
	}
	@container root style(--darkmode: 1) {
	    body {
		    /* background-image: linear-gradient(rgba(0,0,0,0),rgba(0,0,0,0)),url("images/5570834.jpg"); */
			background-repeat: no-repeat;
			background-attachment: fixed;
			background-size: 100%;
		}
	}
	@keyframes blinkFadeEffect {
		0%, 100% {opacity: 0.75;}
		50% {opacity: 0.95;}
	}
	@keyframes flash {
		0% {background-color: #400000;}
		16.6667% {background-color: #404000;}
		33.3333% {background-color: #004000;}
		50% {background-color: #004040;}
		66.6667% {background-color: #000040;}
		83.3333% {background-color: #400040;}
		100% {background-color: #400000;}
	}
</style>
<body>
	<div id="background-index3">
		<video autoplay muted loop id="myVideo" style="filter:invert(100%);>
			<!-- <source src="rain.mp4" type="video/mp4">
			<source src="C:\Users\Lenovo\Downloads\Video\vecteezy_texture-stock-background_49474463.mp4" type="video/mp4"> -->
			<source src="videos/vecteezy_animation-background-grid-black-and-white-looping_8661326.mp4" type="video/mp4">
			Your browser does not support HTML5 video.
		</video>
		<div style="position:fixed; width:100%; height:100%; left:0; top:0; background-color:rgba(0,0,0,1); z-index:-3; animation: blinkFadeEffect 12s linear infinite;"></div>
		<div style="position:fixed; width:100%; height:100%; left:0; top:0; background-color:rgba(255,255,255,0.15); z-index:-2;"></div>
	</div>
	<div id="background-index4">
		<video autoplay muted loop id="myVideo">
			<source src="videos/1851190-hd_1920_1080_25fps.mp4" type="video/mp4">
			Your browser does not support HTML5 video.
		</video>
		<div style="position:fixed; width:100%; height:100%; left:0; top:0; background-color:rgba(0,0,0,0.5); z-index:-2;"></div>
	</div>
	<div id="background-index5" style="position:fixed; width:100%; height:100%; left:0; top:0; background-color:rgba(0,0,0,1); z-index:-2; animation: flash 30s infinite;"></div>
    <div id="top-color" style="position:absolute; width:100%; height:80px; left:0; top:0; z-index:-1;"></div>
	<h1 class="heading">Tes Kognitif dan Visual</h1><br>
	<div class="column" style="padding-right:50px;">
        <img src="images/soal-matematika.jpg" style="background-color:white; filter:invert(0%);" width="200">
	</div>
	<div class="column" style="padding-right:50px;">
	    <img src="images/visual-icon.png" style="margin-top:10px;" width="120">
	</div>
	<div class="clearfix"></div>
    <!-- <br> -->

    <div class="sidebar" id="sidebar"></div>
    <div class="backsidebar" id="backsidebar" onclick="closeNav()"></div>
    <div class="column" style="padding-right:30px; position:fixed; left:10px; top:10px;">
        <!-- border: 2px solid white; -->
        <!-- <div class="openbtn" style="border:2px solid #c0c0c0;" onclick="openNav()"><img src="images/menu-icon.jpg" style="filter:invert(0%)" width="30"></div> -->
        <div class="openbtn" onclick="openNav()"><img src="images/menu-icon.jpg" width="30"></div>
    </div><br>

    <script>
        function openNav() {
            document.getElementById("sidebar").style.width = "300px";
            document.getElementById("backsidebar").style.display = "block";
            document.getElementById("backsidebar").style.width = "100%";
            document.getElementById("backsidebar").style.height = "100%";
            // document.body.style.backgroundColor = "rgba(0,0,0,0.5)";
        }
        function closeNav() {
            document.getElementById("sidebar").style.width = "0";
            document.getElementById("backsidebar").style.display = "none";
            document.getElementById("backsidebar").style.width = "0";
            document.getElementById("backsidebar").style.height = "0";
            // document.body.style.backgroundColor = "rgba(0,0,0,0)";
        }

        // <li><a href="javascript:void(0)" style="color:red">Tes Penglihatan Mata</a></li>
        document.getElementById("sidebar").innerHTML = `
        <div class="closebtn" onclick="closeNav()"><img src="images/close-icon.png" width="20"></div>
        <span style="font-size:26px;"><b>Main Menu</b></span>
        <!-- <input type="text" id="mySearch" onkeyup="myFunction()" placeholder="Search..."><br><br> -->
        <hr style="height:2px; border-width:0; background-color:gray">
        <span style="font-size:22px;"><b>Program</b></span>
        <ul class="heading" id="myMenu" style="line-height:5px;top:0;bottom:0">
            <li><a href="Bangun Datar.html">Bangun Datar</a></li>
            <li><a href="Bangun Ruang.html">Bangun Ruang</a></li>
            <li><a href="Soal Matematika.html">Soal Matematika</a></li>
            <li><a href="Peluang.html">Peluang</a></li>
            <li><a href="Kalkulator Sederhana.html">Kalkulator Sederhana</a></li>
			<li><a href="Tes Kognitif dan Visual.html">Tes Kognitif dan Visual</a></li>
        </ul><br>
        <hr style="height:2px; border-width:0; background-color:gray">
        <span style="font-size:22px;"><b>Lainnya</b></span>
        <ul class="heading" id="myMenu" style="line-height:5px">
            <li><a href="../projects.html">Projects</a></li>
            <li><a href="javascript:void(0)" style="color:red">Tentang program ini</a></li>
        </ul>
        `;
    </script>

    <!-- <span> -->
    <p>
    <b>Tes Kognitif dan Visual</b> adalah sebuah penilaian gabungan yang menggunakan stimulus visual sebagai media untuk menguji kemampuan otak dalam menganalisis, memecahkan masalah logis, dan membuat penilaian yang akurat, sekaligus menguji kemampuan mata untuk menangkap input data tersebut. Ada dua jenis dalam tes kognitif ini, yaitu Domain Visual dan Domain Kognitif.
    <br><br>
    <b>1. Domain Visual (Persepsi dan Akurasi Mata) ðŸ‘€</b><br>
	Bagian ini menguji fungsi dasar mata dan akurasi persepsi visual. Ini berfokus pada seberapa baik mata Anda menerima informasi dan seberapa akurat otak memproses data visual mentah.
	<br><br>
	<b>2. Domain Kognitif (Penalaran dan Logika) ðŸ§ </b><br>
    Bagian ini menguji kemampuan otak untuk menganalisis, memproses, dan memecahkan masalah menggunakan informasi yang diterima secara visual. Ini adalah komponen yang menyamakan program Anda dengan subtes dalam tes IQ atau psikotes.
	<br><br>
	Program ini bisa menguji kemampuan kognitif dan visual, supaya membuat pemikiran otak dan yang bekerja pada mata menjadi semakin terlatih dan berguna dalam menghadapi ujian. Ada dua jenis pertanyaan dalam tes ini, yaitu Tes Buta Warna, Tes Akurasi Visual, dan Tes Pola Kognitif.
	<br><br>
	<span style="color:red">[Program ini masih dalam proses pengerjaan]</span>
	<br><br>
	</p>
	
	<hr style="height:2px; border-width:0; background-color:gray">
	
	
	<img src="images/settings-icon.png" style="position:absolute; left:300px; padding-top:5px;" width="40">
    <h2 class="heading">Pengaturan</h2>
	
	<div class="column" style="width:500px; padding-left:25px; padding-right:10px; padding-bottom:25px;">
		<div style="margin-left:-25px; margin-top:-5px; height:35px; width:15px; background-color:gray; position:absolute;"></div>
		<div style="margin-left:-10px; margin-top:-5px; height:35px; width:500px; background-color:rgba(128,128,128,0.25); position:absolute; z-index:-1;"></div>
		<h3 class="heading color2" style="margin-top:0">Jenis pertanyaan</h3>
        <label>Pilih jenis pertanyaan tes ini:</label><br>
        <select id="bentuk" style="width:350px" onchange="pilihan(true);clearInterval(myInterval);">
		    <option id=0>Tes Visual Standar</option>
            <option id=1>Tes Buta Warna</option>
            <option id=2>Tes Akurasi Visual</option>
            <option id=3>Tes Pola Kognitif</option>
			<option id=4>Tes Memori</option>
        </select><br><br>
		
		<div id="bentuk-penjelasan" style="line-height:1.5em"></div><br><br>

        <div id="bentuk-sub" style="display:none">
            <label>Pilih jenis pertanyaan 2:</label><br>
            <select id="pilihan-bentuk-sub" style="width:300px" onchange="pilihan();clearInterval(myInterval);"></select><br><br>
			<div id="bentuk-penjelasan2" style="line-height:1.5em"></div><br><br>
        </div>
        
        <div id="bentuk-soal" style="display:block">
            <div class="column" style="padding-right:50px;">
                <label>Pilih bentuk soal:</label><br>
                <select id="pilihan-bentuk-soal" style="width:200px" onchange="pilihan();clearInterval(myInterval);">
                    <!-- <option>Tulisan datar</option> -->
                    <option>Tulisan Datar</option>
                    <option>Bentuk Bersusun</option>
                </select>
            </div>
            <div class="column" id="contoh-bentuk-soal">
                <span>
                Contoh:<br><br>
                Hasil dari 123 + 45 adalah ...
                </span>
            </div>
            <div class="clearfix"></div>
            <br><br>
        </div>
    </div>

    <!-- <div class="column" style="padding-right:50px;"> -->
	<div class="column" style="width:500px; padding-left:25px; padding-right:10px; padding-bottom:25px;">
	    <div style="margin-left:-25px; margin-top:-5px; height:35px; width:15px; background-color:gray; position:absolute;"></div>
		<div style="margin-left:-10px; margin-top:-5px; height:35px; width:500px; background-color:rgba(128,128,128,0.25); position:absolute; z-index:-1;"></div>
	    <h3 class="heading color3" style="margin-top:0">Mode pertanyaan</h3>
        <label>Pilih tingkat kesulitan:</label><br>
        <select id="level" style="width:150px">
            <option>Mudah</option>
            <option>Sedang</option>
            <option>Sulit</option>
            <option>Sangat sulit</option>
        </select><br><br>
        <!-- <div class="column" style="padding-right:70px;"> -->
        <label>Pilih tipe pertanyaan:</label><br>
        <!-- <select id="tipe" style="width:150px" onchange="pilihan()"> -->
        <select id="tipe" style="width:250px" onchange="pilihan();clearInterval(myInterval);">
            <!-- <option>Isian singkat</option> -->
		    <option value="is">Isian singkat</option>
            <option value="pg">Pilihan ganda</option>
            <option value="pgk">Pilihan ganda kompleks</option>
        </select><br><br>
        <!-- <div class="column" id="pilihan" style="display:block"> -->
        <div class="column" id="opsi-pilihan" style="display:none; padding-right:70px;">
            <label>Jumlah pilihan:</label><br>
            <select name="jumlah-pilihan" id="jumlah-pilihan" style="width:150px" onchange="pilihan();clearInterval(myInterval);">
                <option value="3">3 (A-C)</option>
                <option value="4">4 (A-D)</option>
                <option value="5">5 (A-E)</option>
				<option value="6">6 (A-F)</option>
            </select>
        </div>
		<div class="column" id="opsi-pilihan2" style="display:none">
            <label>Jumlah jawaban benar:</label><br>
            <select name="jumlah-pilihan2" id="jumlah-pilihan2" style="width:150px" onchange="pilihan();clearInterval(myInterval);">
                <option value="-1">Acak (2-4)</option>
                <option value="2">2</option>
                <option value="3">3</option>
				<option value="4">4</option>
            </select>
        </div>
        <div class="clearfix"></div>
		
		<!-- <img src="images/timer-icon.png" id="timer-icon" style="position:absolute; left:400px;" width="60"> -->
		<img src="images/timer-icon.png" id="timer-icon" style="position:absolute; margin-left:300px; margin-top:20px;" width="60"><br>
		<label>Pilih waktu timer setiap soal:</label><br>
		<select id="waktu" style="width:150px" onchange="pilihan();clearInterval(myInterval);">
			<option value="0">Tidak ada</option>
			<option value="5">5 detik</option>
			<option value="10">10 detik</option>
			<option value="15">15 detik</option>
			<option value="30">30 detik</option>
			<option value="60">1 menit</option>
			<option value="1">Kustom</option>
		</select><br><br>
		<div id="waktu-timer" style="display:none">
			<label>Waktu timer:</label><br>
			<input type="number" id="waktu2" style="width:150px;" min="1" value="10">
			<label>&nbsp;detik</label>
		</div><br>

        <label class="cb-container" style="width:400px;">Percobaan satu kali dalam setiap soal
            <input type="checkbox" id="check2" onclick="settings_check();tampilkan()">
            <span class="checkmark"></span>
        </label><br>

        <img src="images/keyboard.png" style="position:absolute; margin-left:300px; margin-top:-10px;" width="80">
        Tombol Keyboard:<br>
        - Enter = Selesaikan<br>
        - N = Buat soal baru
        <br><br>

        <!-- <div class="box" id="cerita" style="background-color:#a0b0c0; width:200px; display:none"> -->
        <div class="box" id="cerita" style="background-color:#204060; width:200px; display:none">
            <span style="font-size:20px"><b>Soal cerita</b></span><br><br>
            <label>Pilih tipe pertanyaan:</label><br>
            <select id="cerita2" style="width:150px" onchange="tampilkan()">
                <option>Buah</option>
                <option>Uang</option>
            </select>
        </div>
    </div>
	
	<div class="column" style="width:500px; padding-left:25px; padding-right:10px; padding-bottom:25px;">
	    <div style="margin-left:-25px; margin-top:-5px; height:35px; width:15px; background-color:gray; position:absolute;"></div>
		<div style="margin-left:-10px; margin-top:-5px; height:35px; width:500px; background-color:rgba(128,128,128,0.25); position:absolute; z-index:-1;"></div>
		<h3 class="heading color4" style="margin-top:0">Pengaturan lainnya</h3>
		<img src="images/font.png" id="fonts-icon" style="position:absolute; margin-left:300px; margin-top:10px;" width="60">
		<label>Pilih font:</label><br>
        <select id="jenis-font" style="width:150px" onchange="settings_check()">
            <option value="rubik, sans serif">Rubik</option>
			<option value="poppins, sans serif">Poppins</option>
			<option value="roboto, sans serif">Roboto</option>
			<option value="segoe ui, sans serif">Segoe UI</option>
			<option value="consolas">Consolas</option>
			<option value="roboto mono">Roboto Mono</option>
        </select><br><br>
		<label>Pilih background:</label><br>
        <select id="jenis-background" style="width:200px" onchange="settings_check()">
            <option value="0">Tema terang</option>
			<option value="1">Tema gelap</option>
			<option value="2">Foto pemandangan</option>
			<option value="3">Animasi</option>
			<option value="4">Video Bumi</option>
			<option value="5">Flash</option>
        </select><br><br>
	    <!-- <label>Dengan soal cerita:</label> -->
		<!-- <input type="checkbox" id="check" onclick="change()"> -->
		<!-- <input type="checkbox" id="check" onclick="tampilkan()"> -->
		<label class="cb-container" style="width:400px;">Dengan ucapan suara
			<input type="checkbox" id="suara" onclick="settings_check()">
			<span class="checkmark"></span>
		</label>
		<label class="cb-container" style="width:400px;">Pertahankan pengaturan<br>
			<span style="font-size:14px">Akan direset secara otomatis setelah 3 hari tidak digunakan</span>
			<!-- <input type="checkbox" id="settings" checked="checked"> -->
			<input type="checkbox" id="settings" onclick="settings_check()">
			<span class="checkmark"></span>
		</label>
		<br><br>
	</div>
    <div class="clearfix"></div>

    <hr style="height:2px; border-width:0; background-color:gray">


    <h2 class="heading">Pertanyaan</h2>
    <!-- <p id="soal">Hasil dari 2 + 3 adalah ...</p> -->
    <!-- <p>Pilih pertanyaan</p> -->
    <!-- <p id="soal" style="width:500px; word-wrap:break-word;">Belum ada soal</p> -->
    <span id="soal" style="width:500px; word-wrap:break-word;">Belum ada soal</span>
    <div id="timer" style="position:absolute; left:800px;"></div><br><br>
    <!-- <div class="column" style="padding-right:50px;"></div> -->
    <button class="button" id="buat-soal" onclick="pilihan();buat();pilihan();clearInterval(myInterval);">Buat soal baru</button><br><br>
    <div id="tipe2"></div><br>
    <button class="button" id="solve" onclick="selesaikan()">Selesaikan</button>
    <br><br>

    <h2 class="heading">Jawaban</h2>
    <p id="jawaban">Belum ada jawaban</p>

    <br><br>
    <a class="button2" href="../projects.html">Kembali ke menu projects</a>

    <br><br>
    <!-- <p>Terakhir diupdate: 2 Feb 2024</p> -->
    <!-- <p>Terakhir diupdate: 29 Nov 2024</p> -->
    <!-- <p>Terakhir diupdate: 5 Feb 2025</p> -->
    <!-- <p>Terakhir diupdate: 5 Maret 2025</p> -->
    <!-- <p>Terakhir diupdate: 27 Mei 2025</p> -->
    <!-- <p>Terakhir diupdate: 30 Juli 2025</p> -->
    <!-- <p>Terakhir diupdate: 1 Agustus 2025</p> -->
    <!-- <p>Terakhir diupdate: 29 Agustus 2025</p> -->
    <!-- <p>Terakhir diupdate: 19 September 2025</p> -->
    <!-- <p>Terakhir diupdate: 1 Oktober 2025</p> -->
    <!-- <p>Terakhir diupdate: 8 Oktober 2025</p> -->
    <!-- <p>Terakhir diupdate: 10 Oktober 2025</p> -->
	<!-- <p>Terakhir diupdate: 14 Oktober 2025</p> -->
    <!-- <p>Terakhir diupdate: 15 Oktober 2025</p> -->
	<!-- <p>Terakhir diupdate: 16 Oktober 2025</p> -->
    <!-- <p>Terakhir diupdate: 22 Oktober 2025</p> -->
	<!-- <p>Terakhir diupdate: 28 Oktober 2025</p> -->
    <!-- <p>Terakhir diupdate: 31 Oktober 2025</p> -->
	<!-- <p>Terakhir diupdate: 13 November 2025</p> -->
	<!-- <p>Terakhir diupdate: 1 Desember 2025</p> -->
	<!-- <p>Terakhir diupdate: 24 Desember 2025</p> -->
    <!-- <p>Terakhir diupdate: 14 Januari 2026</p> -->
	<!-- <p>Terakhir diupdate: 23 Januari 2026</p> -->
	<!-- <p>Terakhir diupdate: 24 Januari 2026</p> -->
	<p>Terakhir diupdate: 4 Februari 2026</p>
	
	<script>
        // Time
        d = new Date();
        time = d.getTime();
        time_old = localStorage.getItem('time2');
        if (time_old == null) {
            time_old = 0;
        }
        check_old = localStorage.getItem("settings-check");
        check_old = check_old == "true";
        // if (time > parseInt(time_old) + 5000) {
        console.log(time,time_old)
        if (time > parseInt(time_old) + 3*86400*1000) {
            check_old = false;
        }

        // change();
        if (check_old) {
			// percobaan_check_old = localStorage.getItem("percobaan-check");
            // percobaan_check_old = percobaan_check_old == "true"
			// theme_check_old = localStorage.getItem("tema-check");
			percobaan_check_old = localStorage.getItem("percobaan-check") == "true";
            font_index = localStorage.getItem("font-index");
			background_index_old = localStorage.getItem("background-index");
			suara_check_old = localStorage.getItem("suara-check") == "true";
        } else {
            percobaan_check_old = false;
            font_index = 0;
			background_index_old = 0;
			suara_check_old = false;
        }
        
        document.getElementById("check2").checked = percobaan_check_old;
		document.getElementById("jenis-background").selectedIndex = background_index_old;
        document.getElementById("jenis-font").selectedIndex = font_index;
		document.getElementById("suara").checked = suara_check_old;
        document.getElementById("settings").checked = check_old;
        settings_check();
        // pilihan(); // On off
        pilihan(true);
        // console.log(100);
        // console.log(2**100 % 1000)

        interval = 200;
        setInterval(function() {
            d = new Date();
            time = d.getTime();
            // document.getElementById("time").innerHTML = time;
            // console.log(time);
            localStorage.setItem("time2", time);
        }, interval);

        // pilihan(true);

        function settings_check() {
			// soal_cerita_check = document.getElementById("check").checked;
            percobaan_check = document.getElementById("check2").checked;
            font_value = document.getElementById("jenis-font").value;
			background_index = document.getElementById("jenis-background").value;
            document.body.style.fontFamily = font_value;
            const button_font_list = document.querySelectorAll("button");
            for (let i = 0; i < button_font_list.length; i++) button_font_list[i].style.fontFamily = font_value;
            const input_font_list = document.querySelectorAll("input");
            for (let i = 0; i < input_font_list.length; i++) input_font_list[i].style.fontFamily = font_value;
            const select_font_list = document.querySelectorAll("select");
            for (let i = 0; i < select_font_list.length; i++) select_font_list[i].style.fontFamily = font_value;

			suara_check = document.getElementById("suara").checked;
            check = document.getElementById("settings").checked;
            localStorage.setItem("settings-check", check);
            // console.log(theme_check);
            // console.log(check);
            //console.log(unit_check);
            //console.log(digit)
            
            if (check) {
                // localStorage.setItem("soal-cerita-check", soal_cerita_check);
                localStorage.setItem("percobaan-check", percobaan_check);
                jenis_font = document.getElementById("jenis-font");
                localStorage.setItem("font-index", font_value);
				jenis_background = document.getElementById("jenis-background");
                localStorage.setItem("background-index", background_index);
				localStorage.setItem("suara-check", suara_check);
            }
			if (background_index == 0) {
			    document.documentElement.style.setProperty('--darkmode', 0);
				document.body.style.backgroundImage = "none";
			} else if (background_index == 1) {
				document.documentElement.style.setProperty('--darkmode', 1);
				document.body.style.backgroundImage = "linear-gradient(rgba(0,0,0,0),rgba(0,0,0,0)),url('images/5570834.jpg')";
			} else if (background_index == 2) {
				document.documentElement.style.setProperty('--darkmode', 1);
				document.body.style.backgroundImage = "linear-gradient(rgba(0,0,0,0),rgba(0,0,0,0)),url('images/pexels-souvenirpixels-1516046.jpg')";
			} else {
				document.documentElement.style.setProperty('--darkmode', 1);
				document.body.style.backgroundImage = "none";
			}
			if (background_index == 3) document.getElementById('background-index3').style.display = "block";
			else document.getElementById('background-index3').style.display = "none";
			if (background_index == 4) document.getElementById('background-index4').style.display = "block";
			else document.getElementById('background-index4').style.display = "none";
			if (background_index == 5) document.getElementById('background-index5').style.display = "block";
			else document.getElementById('background-index5').style.display = "none";
            /* if (theme_check) {
                document.documentElement.style.setProperty('--darkmode', 1);
            } else {
                document.documentElement.style.setProperty('--darkmode', 0);
            } */
        }
		
		function gcd(a, b) {
            for (let temp = b; b !== 0;) {
                b = a % b;
                a = temp;
                temp = b;
            }
            return a;
        }

        // function lcmFunction(a, b) { 
        function lcm(a, b) { 
            const gcdValue = gcd(a, b);
            return (a * b) / gcdValue; 
        }
        function convert_to_math(text) {
            // return text.replaceAll("/(","&nbsp;<span style='font-size:18px'>&#x005c(").replaceAll("/)","&#x005c)</span>")
            // replaceAll(";","&#x005c").
            try {MathJax.typeset();} catch(err) {}
            return text.replaceAll("/(","<span style='font-size:18px'>&#x005c(").replaceAll("/)","/)</span>").replaceAll("/","&#x005c").replaceAll("<&#x005cspan>","</span>")
        }
        
        // a = 0;
        // a = -1;
        var a = '';
        var b = 0;
        a2 = 0;
        a3 = 0;
        b2 = 0;
        // a_2 = 0;
        var a_2 = 0;
        var b_2 = 0;
        function buat() {
			var bs = document.getElementById("pilihan-bentuk-soal");
            var bs2 = bs.options[bs.selectedIndex];
            var e = document.getElementById("bentuk");
            var e1 = e.options[e.selectedIndex];
            var level = document.getElementById("level");
            var level2 = level.options[level.selectedIndex];
            var tipe = document.getElementById("tipe");
            var tipe2 = tipe.options[tipe.selectedIndex];
			document.getElementById('jawaban').innerHTML = 'Belum ada jawaban';
			document.getElementById('solve').style.display = 'block';
            document.getElementById('tipe2').style.display = 'block';
			
			soal = '';
            soal_check = true;
			pilihan_index = Math.floor(j_pilihan2 * Math.random());
            pilihan_list = [];
            random_check = true;
			
			if (e1.index == 0) {
                if (e1_bentuk.index == 0) {
                    // <canvas id="myCanvas" width="500" height="300" style="border:1px solid #000000;">
					if (background_index == 0) background_color = 'white'; else background_color = '#202020';
                    soal_teks = `
                    <canvas id="myCanvas" width="400" height="300" style="background-color:${background_color}; border:1px solid gray;">
                    Sorry, your browser does not support canvas.
                    </canvas><br><br>
                    `;
                    soal_teks += 'Banyaknya titik di gambar ini adalah ...';
                    document.getElementById('soal').innerHTML = soal_teks;
                    const canvas = document.getElementById("myCanvas");
                    const ctx = canvas.getContext("2d");
                    ctx.beginPath();
                    // hasil = 20;
                    if (level2.index == 0) {
                        // hasil = Math.floor(1 + 20 * Math.random());
                        // while (typeof a2 === 'undefined' || a == a2 || check) {
                        while (typeof a2 === 'undefined' || a == a2) {
                            a2 = Math.floor(21 * Math.random());
                            // console.log(a2);
                        }
                        // ctx.clear();
                        // ctx.fill();
                    } else if (level2.index == 1) {
                        while (typeof a2 === 'undefined' || a == a2) {
                            a2 = Math.floor(11 + 90 * Math.random());
                        }
                    } else {
                        while (typeof a2 === 'undefined' || a == a2) {
                            a2 = Math.floor(76 + 925 * Math.random());
                        }
                    }
                    a = a2;
                    hasil = a;
                    // for (let a = 1; a <= 20; a++) {
                    for (let a_count = 1; a_count <= a; a_count++) {
                        // ctx.arx(50*(1+(a-1)%8), 50*(1+parseInt((a-1)/8)), 5, 0, 2 * Math.Pi);
                        // ctx.fillStyle = "yellow";
                        if (background_index == 0) ctx.fillStyle = "black"; else ctx.fillStyle = "white";
                        if (a <= 9*6) ctx.fillRect(37+40*(0+(a_count-1)%9), 37+40*(0+parseInt((a_count-1)/9)), 6, 6);
                        else if (a <= 19*14) ctx.fillRect(18+20*(0+(a_count-1)%19), 18+20*(0+parseInt((a_count-1)/19)), 4, 4);
                        else ctx.fillRect(9+10*(0+(a_count-1)%39), 9+10*(0+parseInt((a_count-1)/39)), 2, 2);
                        // ctx.fill();
                    }
                    if (tipe2.index == 1) {
                        for (let i = 1; i <= j_pilihan2; i++) {
                            value_check = true;
                            while (value_check || pilihan_list.indexOf(value) > -1 || value == hasil) {
                                value = Math.floor(a/2+Math.max(a,6)*Math.random());
                                value_check = false;
                            }
                            pilihan_list.push(value);
                        }
                    }
                } else if (e1_bentuk.index == 1) {
					if (background_index == 0) background_color = 'white'; else background_color = '#202020';
                    soal_teks = `
                    <canvas id="myCanvas" width="400" height="300" style="background-color:${background_color}; border:1px solid gray;">
                    Sorry, your browser does not support canvas.
                    </canvas><br><br>
                    `;
                    soal_teks += 'Banyaknya titik di gambar ini adalah ...';
                    document.getElementById('soal').innerHTML = soal_teks;
                    const canvas = document.getElementById("myCanvas");
                    const ctx = canvas.getContext("2d");
                    ctx.beginPath();
                    if (level2.index == 0) {
                        while (typeof a2 === 'undefined' || a == a2) {
                            a2 = Math.floor(21 * Math.random());
                        }
                    } else if (level2.index == 1) {
                        while (typeof a2 === 'undefined' || a == a2) {
                            a2 = Math.floor(11 + 40 * Math.random());
                        }
                    } else {
                        while (typeof a2 === 'undefined' || a == a2) {
                            a2 = Math.floor(51 + 200 * Math.random());
                        }
                    }
                    a = a2;
                    hasil = 0;
                    max_gap = 2 + Math.min(Math.floor(a**0.5), a-1) * Math.random();
                    // 1 <= x <= max_gap
                    // while (typeof b2_2 === 'undefined' || b2 == b2_2) {
                        // b2_2 = Math.floor(1 + (max_gap-1) * Math.random());
                    // }
                    // b2 = b2_2;
                    a_count2 = Math.floor(1 + (max_gap-1) * Math.random());
                    for (let a_count = 1; a_count <= a; a_count++) {
                        if (background_index == 0) ctx.fillStyle = "black"; else ctx.fillStyle = "white";
                        // if (a_count == a_count2) {
						// if (true || a_count == a_count2) {
                        if (a <= 9*6) ctx.fillRect(37+40*(0+(a_count-1)%9), 37+40*(0+parseInt((a_count-1)/9)), 6, 6);
                        else ctx.fillRect(18+20*(0+(a_count-1)%19), 18+20*(0+parseInt((a_count-1)/19)), 4, 4);
                        hasil++;
                        a_count += Math.floor(1 + (max_gap-1) * Math.random());
                    }
                    if (tipe2.index == 1) {
                        for (let i = 1; i <= j_pilihan2; i++) {
                            value_check = true;
                            while (value_check || pilihan_list.indexOf(value) > -1 || value == hasil) {
                                value = Math.floor(a/2+Math.max(a,6)*Math.random());
                                value_check = false;
                            }
                            pilihan_list.push(value);
                        }
                    }
				} else if (e1_bentuk.index == 2) {
					// soal = 'Banyaknya titik di gambar ini adalah ...';
                    if (level2.index == 0) {
                        while (typeof a2 === 'undefined' || a == a2) {
                            a2 = Math.floor(1 + 20 * Math.random());
                        }
                    } else if (level2.index == 1) {
                        while (typeof a2 === 'undefined' || a == a2) {
                            a2 = Math.floor(11 + 40 * Math.random());
                        }
                    } else {
                        while (typeof a2 === 'undefined' || a == a2) {
                            a2 = Math.floor(31 + 170 * Math.random());
                        }
                    }
                    a = a2;
					if (background_index == 0) background_color = 'white'; else background_color = '#202020';
                    soal_teks = `
                    <canvas id="myCanvas" width="520" height="280" style="background-color:${background_color}; border:1px solid gray;">
                    Sorry, your browser does not support canvas.
                    </canvas><br><br>
                    `;
                    soal_teks += `Representasi bilangan dari ${a} adalah ...`;
					document.getElementById('soal').innerHTML = soal_teks;
					const canvas = document.getElementById("myCanvas");
                    const ctx = canvas.getContext("2d");
                    ctx.beginPath();
					
					color1r = Math.floor(256*Math.random());
					color1g = Math.floor(256*Math.random());
					color1b = Math.floor(256*Math.random());
					
					function color_range(num, range, range2) {
					    if (num-range < 0) return Math.min(255, Math.floor(num+range+range2*Math.random()));
						else if (num+range > 255) return Math.max(0, Math.floor(num-range-range2*Math.random()));
						else if (Math.random() < 0.5) return Math.min(255, Math.floor(num+range+range2*Math.random()));
						else return Math.max(0, Math.floor(num-range-range2*Math.random()));
					}
					
					if (level2.index == 0) {
					    color2r = color_range(color1r, 64, 32);
						color2g = color_range(color1g, 64, 32);
						color2b = color_range(color1b, 64, 32);
					} else if (level2.index == 1) {
					    color2r = color_range(color1r, 32, 16);
						color2g = color_range(color1g, 32, 16);
						color2b = color_range(color1b, 32, 16);
					} else if (level2.index == 2) {
					    color2r = color_range(color1r, 12, 12);
						color2g = color_range(color1g, 12, 12);
						color2b = color_range(color1b, 12, 12);
					} else {
					    color2r = color_range(color1r, 4, 4);
						color2g = color_range(color1g, 4, 4);
						color2b = color_range(color1b, 4, 4);
					}
					color1 = `rgb(${color1r}, ${color1g}, ${color1b})`;
					color2 = `rgb(${color2r}, ${color2g}, ${color2b})`;
					
					a = parseInt(1+91*Math.random());
					function squares_color() {
						for (let a_count = 1; a_count <= 91; a_count++) {
							ctx.fillStyle = 'white';
							ctx.fillRect(3+40*((a_count-1)%13), 3+40*parseInt((a_count-1)/13), 34, 34);
						}
					}
					squares_color();
					document.getElementById('solve').style.display = 'none';
				    document.getElementById('tipe2').style.display = 'none';
					document.getElementById('myCanvas').style.cursor = 'pointer';
					attempt_check = true;
					off_check = false;
					var x = -40;
					var y = 0;
					
					canvas.addEventListener('click', function(event) {
					    if (attempt_check) {
							const rect = canvas.getBoundingClientRect();
							// Position on canvas
							if (event.clientX > 0 || event.clientY > 0) {
								x = event.clientX - parseInt(rect.left);
								y = event.clientY - parseInt(rect.top);
							}
							// console.log(rect.left,rect.top,parseInt(rect.left),parseInt(rect.top),x,y);
							// if (x > 100 && x < 200) {
							if (x >= correct_x_min && x <= correct_x_max && y >= correct_y_min && y <= correct_y_max) {
								jawaban_teks = 'Jawabannya benar';
							} else if (x > 0 || y > 0) {
								jawaban_teks = 'Jawabannya salah';
							} else {
							    jawaban_teks = 'Soal ini tidak dijawab';
							}
							jawaban_teks2 = jawaban_teks;
							document.getElementById('jawaban').innerHTML = jawaban_teks;
							if (document.getElementById('suara').checked) {
								speak(jawaban_teks2);
							}
							clicked_num = 1+parseInt(x/40)+13*parseInt(y/40);
							ctx.clearRect(0, 0, canvas.width, canvas.height);
							// ctx.reset();
							if (document.getElementById('check2').checked || off_check) {
								ctx.fillStyle = 'red';
								ctx.fillRect(40*((clicked_num-1)%13), 40*parseInt((clicked_num-1)/13), 40, 40);
								ctx.fillStyle = 'lime';
								ctx.fillRect(40*((a-1)%13), 40*parseInt((a-1)/13), 40, 40);
								attempt_check = false;
								document.getElementById('myCanvas').style.cursor = 'default';
							} else {
								ctx.fillStyle = 'yellow';
								ctx.fillRect(40*((clicked_num-1)%13), 40*parseInt((clicked_num-1)/13), 40, 40);
							}
							squares_color();
						}
					});
				} else if (e1_bentuk.index == 3 || e1_bentuk.index == 4) {
				    // if (theme_check) background_color = 'rgba(0,0,0,0.2)'; else background_color = 'rgba(255,255,255,0.2)';
                    soal_teks = `
                    <canvas id="myCanvas" width="500" height="300" style="background-color:white;">
                    Sorry, your browser does not support canvas.
                    </canvas><br><br>
                    `;
					if (e1_bentuk.index == 3) {
						soal_teks += 'Angka yang muncul di gambar ini adalah ...';
					} else {
						soal_teks += 'Huruf yang muncul di gambar ini adalah ...';
					}
                    document.getElementById('soal').innerHTML = soal_teks;
                    const canvas = document.getElementById("myCanvas");
                    const ctx = canvas.getContext("2d");
                    ctx.beginPath();
					alphabet_list = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];
					while (typeof a2 === 'undefined' || a == a2) {
						if (e1_bentuk.index == 3) {
							a2 = Math.floor(100 + 900 * Math.random());
						} else {
							a2 = '';
							for (let i = 1; i <= 4; i++) {
								a2 += alphabet_list[parseInt(52*Math.random())];
							}
						}
                    }
					if (e1_bentuk.index == 3) {
						ctx.font = "200px arial";
					} else {
						ctx.font = "100px arial";
					}
                    a = a2;
                    hasil = a;
					
					mathrandom = Math.random();
					if (mathrandom < 0.1) {
						for (let i = 0; i <= 14; i++) {
							ctx.fillStyle = "white";
							// ctx.fillRect(0, 20*i, 499, 20*i+9);
							ctx.fillRect(0, 20*i, 500, 10);
							ctx.fillStyle = "black";
							ctx.fillRect(0, 20*i+10, 500, 10);
						}
					} else if (mathrandom < 0.2) {
						for (let i = 0; i <= 24; i++) {
							ctx.fillStyle = "white";
							ctx.fillRect(20*i, 0, 20, 300);
							ctx.fillStyle = "black";
							ctx.fillRect(20*i+10, 0, 20, 300);
						}
					} else if (mathrandom < 0.3) {
						for (let i = 0; i <= 1499; i++) {
							x = i % 50;
							y = parseInt(i/50);
							if ((x+y) % 2 == 0) ctx.fillStyle = "white"; else ctx.fillStyle = "black";
							ctx.fillRect(10*x,10*y,10,10);
						}
					} else if (mathrandom < 0.4) {
						for (let i = 0; i <= 1499; i++) {
							x = i % 50;
							y = parseInt(i/50);
							if (parseInt((x+y)/4) % 2 == 0) ctx.fillStyle = "white"; else ctx.fillStyle = "black";
							ctx.fillRect(10*x,10*y,10,10);
						}
					} else if (mathrandom < 0.5) {
						for (let i = 0; i <= 1499; i++) {
							x = i % 50;
							y = parseInt(i/50);
							if (parseInt(1000+(x-y)/4) % 2 == 0) ctx.fillStyle = "white"; else ctx.fillStyle = "black";
							ctx.fillRect(10*x,10*y,10,10);
						}
					} else if (mathrandom < 0.6) {
						for (let i = 0; i <= 14; i++) {
							if (i % 2 == 0) ctx.fillStyle = "white"; else ctx.fillStyle = "black";
							ctx.fillRect(10*i,10*i,500-20*i,300-20*i);
						}
					} else if (mathrandom < 0.7) {
						for (let i = 0; i <= 1499; i++) {
							x = i % 50;
							y = parseInt(i/50);
							if ((x+1) % 3 != 0 && (y+1) % 3 != 0) ctx.fillStyle = "white"; else ctx.fillStyle = "black";
							ctx.fillRect(10*x,10*y,10,10);
						}
					} else if (mathrandom < 0.8) {
						for (let i = 0; i <= 1499; i++) {
							x = i % 50;
							y = parseInt(i/50);
							if ((x+1) % 3 == 0 || (y+1) % 3 == 0) ctx.fillStyle = "white"; else ctx.fillStyle = "black";
							ctx.fillRect(10*x,10*y,10,10);
						}
					} else if (mathrandom < 0.9) {
						for (let i = 0; i <= 24; i++) {
							if (i % 2 == 0) ctx.fillStyle = "white"; else ctx.fillStyle = "black";
							ctx.fillRect(10*i,-100+10*i,500-20*i,500-20*i);
						}
					} else {
						for (let i = 0; i <= 49; i++) {
							ctx.beginPath();
							if (i % 2 == 0) ctx.fillStyle = "white"; else ctx.fillStyle = "black";
							ctx.arc(250,150,500-10*i,0,2*Math.PI);
							ctx.fill();
						}
					}
					
					// ctx.font = "50px Arial";
					// ctx.fillStyle = "white";
					// ctx.fillText("Hello World",10,80);
					ctx.fillStyle = "rgba(255,255,255,0.2)"
					ctx.textAlign = "center";
					ctx.textBaseline = "middle";
					
					if (Math.random() < 0.5) {
						if (level2.index == 0) alpha = 0.5+Math.random();
						else if (level2.index == 1) alpha = 0.25+0.25*Math.random();
						else if (level2.index == 2) alpha = 0.15+0.1*Math.random();
						else alpha = 0.1+0.05*Math.random();
						ctx.fillStyle = `rgba(255,255,255,${alpha})`
					} else {
						if (level2.index == 0) alpha = 0.5+Math.random();
						else if (level2.index == 1) alpha = 0.25+0.25*Math.random();
						else if (level2.index == 2) alpha = 0.1+0.15*Math.random();
						else alpha = 0.05+0.05*Math.random();
						ctx.fillStyle = `rgba(0,0,0,${alpha})`;
					}
					
					// ctx.fillText(parseInt(a/100),150,150);
					// ctx.fillText(parseInt(a/10)%10,250,150);
					// ctx.fillText(a%10,350,150);
					ctx.fillText(a,250,150);
					
                    if (tipe2.index == 1) {
                        for (let i = 1; i <= j_pilihan2; i++) {
                            value_check = true;
                            while (value_check || pilihan_list.indexOf(value) > -1 || value == hasil) {
                                value = Math.floor(a/2+Math.max(a,6)*Math.random());
                                value_check = false;
                            }
                            pilihan_list.push(value);
                        }
                    }
				}
				
			} else if (e1.index == 1) {
                if (e1_bentuk.index == 0) {
			        // <canvas id="myCanvas" width="500" height="300" style="border:1px solid #000000;">, background-color:#202020
					// if (theme_check) background_color = 'black'; else background_color = 'white';
					if (background_index == 0) background_color = 'rgba(0,0,0,0.2)'; else background_color = 'rgba(255,255,255,0.2)';
					// background_color = 'none';
                    soal_teks = `
                    <canvas id="myCanvas" width="520" height="280" style="background-color:${background_color};">
                    Sorry, your browser does not support canvas.
                    </canvas><br><br>
                    `;
                    // soal_teks += 'Banyaknya titik di gambar ini adalah ...';
					soal_teks += 'Angka yang muncul di gambar ini adalah ...';
                    document.getElementById('soal').innerHTML = soal_teks;
                    const canvas = document.getElementById("myCanvas");
                    const ctx = canvas.getContext("2d");
                    ctx.beginPath();
                    // hasil = 20;
					while (typeof a2 === 'undefined' || a == a2) {
                        a2 = Math.floor(100 + 900 * Math.random());
                    }
                    a = a2;
                    hasil = a;
					
					color1r = Math.floor(256*Math.random());
					color1g = Math.floor(256*Math.random());
					color1b = Math.floor(256*Math.random());
					
					function color_range(num, range, range2) {
					    if (num-range < 0) return Math.min(255, Math.floor(num+range+range2*Math.random()));
						else if (num+range > 255) return Math.max(0, Math.floor(num-range-range2*Math.random()));
						else if (Math.random() < 0.5) return Math.min(255, Math.floor(num+range+range2*Math.random()));
						else return Math.max(0, Math.floor(num-range-range2*Math.random()));
					}
					
					if (level2.index == 0) {
					    color2r = color_range(color1r, 64, 32);
						color2g = color_range(color1g, 64, 32);
						color2b = color_range(color1b, 64, 32);
					} else if (level2.index == 1) {
					    color2r = color_range(color1r, 32, 16);
						color2g = color_range(color1g, 32, 16);
						color2b = color_range(color1b, 32, 16);
					} else if (level2.index == 2) {
					    color2r = color_range(color1r, 12, 12);
						color2g = color_range(color1g, 12, 12);
						color2b = color_range(color1b, 12, 12);
					} else {
					    color2r = color_range(color1r, 4, 4);
						color2g = color_range(color1g, 4, 4);
						color2b = color_range(color1b, 4, 4);
					}
					color1 = `rgb(${color1r}, ${color1g}, ${color1b})`;
					color2 = `rgb(${color2r}, ${color2g}, ${color2b})`;
                    // for (let a = 1; a <= 20; a++) {
                    for (let a_count = 1; a_count <= 91; a_count++) {
                        // ctx.fillStyle = "#ff0000";
						// ctx.fillStyle = rgb(0,255,0);
						ctx.fillStyle = color1;
						// if (a <= 9*6) ctx.fillRect(37+40*(0+(a_count-1)%9), 37+40*(0+parseInt((a_count-1)/9)), 6, 6);
                        ctx.fillRect(3+40*((a_count-1)%13), 3+40*parseInt((a_count-1)/13), 34, 34);
                        // ctx.fill();
                    }
					function gambar_angka(angka, x, y) {
					    // ctx.fillStyle = "#ff4000";
						ctx.fillStyle = color2;
						if (angka == 0) coordinates = [[x,y],[x+1,y],[x+2,y],[x,y+1],[x+2,y+1],[x,y+2],[x+2,y+2],[x,y+3],[x+2,y+3],[x,y+4],[x+1,y+4],[x+2,y+4]];
						else if (angka == 1) coordinates = [[x+2,y],[x+2,y+1],[x+2,y+2],[x+2,y+3],[x+2,y+4]];
						else if (angka == 2) coordinates = [[x,y],[x+1,y],[x+2,y],[x+2,y+1],[x,y+2],[x+1,y+2],[x+2,y+2],[x,y+3],[x,y+4],[x+1,y+4],[x+2,y+4]];
						else if (angka == 3) coordinates = [[x,y],[x+1,y],[x+2,y],[x+2,y+1],[x,y+2],[x+1,y+2],[x+2,y+2],[x+2,y+3],[x,y+4],[x+1,y+4],[x+2,y+4]];
						else if (angka == 4) coordinates = [[x,y],[x+2,y],[x,y+1],[x+2,y+1],[x,y+2],[x+1,y+2],[x+2,y+2],[x+2,y+3],[x+2,y+4]];
						else if (angka == 5) coordinates = [[x,y],[x+1,y],[x+2,y],[x,y+1],[x,y+2],[x+1,y+2],[x+2,y+2],[x+2,y+3],[x,y+4],[x+1,y+4],[x+2,y+4]];
						else if (angka == 6) coordinates = [[x,y],[x+1,y],[x+2,y],[x,y+1],[x,y+2],[x+1,y+2],[x+2,y+2],[x,y+3],[x+2,y+3],[x,y+4],[x+1,y+4],[x+2,y+4]];
						else if (angka == 7) coordinates = [[x,y],[x+1,y],[x+2,y],[x+2,y+1],[x+2,y+2],[x+2,y+3],[x+2,y+4]];
						else if (angka == 8) coordinates = [[x,y],[x+1,y],[x+2,y],[x,y+1],[x+2,y+1],[x,y+2],[x+1,y+2],[x+2,y+2],[x,y+3],[x+2,y+3],[x,y+4],[x+1,y+4],[x+2,y+4]];
						else if (angka == 9) coordinates = [[x,y],[x+1,y],[x+2,y],[x,y+1],[x+2,y+1],[x,y+2],[x+1,y+2],[x+2,y+2],[x+2,y+3],[x,y+4],[x+1,y+4],[x+2,y+4]];
						else coordinates = [];
						for (let i = 0; i < coordinates.length; i++) {
						    ctx.fillRect(3+40*coordinates[i][0], 3+40*coordinates[i][1], 34, 34);
						}
					}
					gambar_angka(Math.floor(a/100),1,1);
					gambar_angka(Math.floor(a/10)%10,5,1);
					gambar_angka(a%10,9,1);
                    if (tipe2.index == 1) {
                        for (let i = 1; i <= j_pilihan2; i++) {
                            value_check = true;
                            while (value_check || pilihan_list.indexOf(value) > -1 || value == hasil) {
                                value = Math.floor(a/2+Math.max(a,6)*Math.random());
                                value_check = false;
                            }
                            pilihan_list.push(value);
                        }
                    }	
					
				} else if (e1_bentuk.index == 1) {
			        // <canvas id="myCanvas" width="500" height="300" style="border:1px solid #000000;">, background-color:#202020
                    if (background_index == 0) background_color = 'rgba(0,0,0,0.2)'; else background_color = 'rgba(255,255,255,0.2)';
                    soal_teks = `
                    <canvas id="myCanvas" width="520" height="280" style="background-color:${background_color};">
                    Sorry, your browser does not support canvas.
                    </canvas><br><br>
                    `;
                    // soal_teks += 'Banyaknya titik di gambar ini adalah ...';
					soal_teks += 'Angka yang muncul di gambar ini adalah ...';
                    document.getElementById('soal').innerHTML = soal_teks;
                    const canvas = document.getElementById("myCanvas");
                    const ctx = canvas.getContext("2d");
                    ctx.beginPath();
                    // hasil = 20;
					while (typeof a2 === 'undefined' || a == a2) {
                        a2 = Math.floor(100 + 900 * Math.random());
                    }
                    a = a2;
                    hasil = a;
					
					color1a = Math.floor(360*Math.random());
					
					function color_range(num, range, range2) {
						if (Math.random() < 0.5) return Math.floor(num+range+range2*Math.random()) % 360;
						else return Math.floor(num-range-range2*Math.random()) % 360;
					}
					
					if (level2.index == 0) color2a = color_range(color1a, 60, 30);
					else if (level2.index == 1) color2a = color_range(color1a, 30, 15);
					else if (level2.index == 2) color2a = color_range(color1a, 12, 9);
					else color2a = color_range(color1a, 6, 6);
					
					// color1 = `hsl(${color1h}, ${color1s}, ${color1l})`;
					// color2 = `hsl(${color2h}, ${color2s}, ${color2l})`;
                    // for (let a = 1; a <= 20; a++) {
                    for (let a_count = 1; a_count <= 91; a_count++) {
                        // ctx.fillStyle = "#ff0000";
						// ctx.fillStyle = rgb(0,255,0);
						color1b = Math.floor(33+34*Math.random());
					    color1c = Math.floor(33+34*Math.random());
						// color1 = `hsl(${color1h}, ${color1s}%, ${color1l}%)`;
						color1 = `hsl(${color1a}, ${color1b}%, ${color1c}%)`;
						ctx.fillStyle = color1;
						// if (a <= 9*6) ctx.fillRect(37+40*(0+(a_count-1)%9), 37+40*(0+parseInt((a_count-1)/9)), 6, 6);
                        ctx.fillRect(3+40*((a_count-1)%13), 3+40*parseInt((a_count-1)/13), 34, 34);
                        // ctx.fill();
                    }
					function gambar_angka(angka, x, y) {
					    // ctx.fillStyle = "#ff4000";
						// ctx.fillStyle = color2;
						if (angka == 0) coordinates = [[x,y],[x+1,y],[x+2,y],[x,y+1],[x+2,y+1],[x,y+2],[x+2,y+2],[x,y+3],[x+2,y+3],[x,y+4],[x+1,y+4],[x+2,y+4]];
						else if (angka == 1) coordinates = [[x+2,y],[x+2,y+1],[x+2,y+2],[x+2,y+3],[x+2,y+4]];
						else if (angka == 2) coordinates = [[x,y],[x+1,y],[x+2,y],[x+2,y+1],[x,y+2],[x+1,y+2],[x+2,y+2],[x,y+3],[x,y+4],[x+1,y+4],[x+2,y+4]];
						else if (angka == 3) coordinates = [[x,y],[x+1,y],[x+2,y],[x+2,y+1],[x,y+2],[x+1,y+2],[x+2,y+2],[x+2,y+3],[x,y+4],[x+1,y+4],[x+2,y+4]];
						else if (angka == 4) coordinates = [[x,y],[x+2,y],[x,y+1],[x+2,y+1],[x,y+2],[x+1,y+2],[x+2,y+2],[x+2,y+3],[x+2,y+4]];
						else if (angka == 5) coordinates = [[x,y],[x+1,y],[x+2,y],[x,y+1],[x,y+2],[x+1,y+2],[x+2,y+2],[x+2,y+3],[x,y+4],[x+1,y+4],[x+2,y+4]];
						else if (angka == 6) coordinates = [[x,y],[x+1,y],[x+2,y],[x,y+1],[x,y+2],[x+1,y+2],[x+2,y+2],[x,y+3],[x+2,y+3],[x,y+4],[x+1,y+4],[x+2,y+4]];
						else if (angka == 7) coordinates = [[x,y],[x+1,y],[x+2,y],[x+2,y+1],[x+2,y+2],[x+2,y+3],[x+2,y+4]];
						else if (angka == 8) coordinates = [[x,y],[x+1,y],[x+2,y],[x,y+1],[x+2,y+1],[x,y+2],[x+1,y+2],[x+2,y+2],[x,y+3],[x+2,y+3],[x,y+4],[x+1,y+4],[x+2,y+4]];
						else if (angka == 9) coordinates = [[x,y],[x+1,y],[x+2,y],[x,y+1],[x+2,y+1],[x,y+2],[x+1,y+2],[x+2,y+2],[x+2,y+3],[x,y+4],[x+1,y+4],[x+2,y+4]];
						else coordinates = [];
						for (let i = 0; i < coordinates.length; i++) {
						    color2b = Math.floor(33+34*Math.random());
							color2c = Math.floor(33+34*Math.random());
						    color2 = `hsl(${color2a}, ${color2b}%, ${color2c}%)`;
						    ctx.fillStyle = color2;
						    ctx.fillRect(3+40*coordinates[i][0], 3+40*coordinates[i][1], 34, 34);
						}
					}
					gambar_angka(Math.floor(a/100),1,1);
					gambar_angka(Math.floor(a/10)%10,5,1);
					gambar_angka(a%10,9,1);
                    if (tipe2.index == 1) {
                        for (let i = 1; i <= j_pilihan2; i++) {
                            value_check = true;
                            while (value_check || pilihan_list.indexOf(value) > -1 || value == hasil) {
                                value = Math.floor(a/2+Math.max(a,6)*Math.random());
                                value_check = false;
                            }
                            pilihan_list.push(value);
                        }
                    }
					
				} else if (e1_bentuk.index == 2) {
				    if (background_index == 0) background_color = 'rgba(0,0,0,0.2)'; else background_color = 'rgba(255,255,255,0.2)';
                    soal_teks = `
                    <canvas id="myCanvas" width="520" height="280" style="background-color:${background_color};">
                    Sorry, your browser does not support canvas.
                    </canvas><br><br>
                    `;
					soal_teks += 'Klik warna yang berbeda!';
                    document.getElementById('soal').innerHTML = soal_teks;
                    const canvas = document.getElementById("myCanvas");
                    const ctx = canvas.getContext("2d");
                    ctx.beginPath();
					
					color1r = Math.floor(256*Math.random());
					color1g = Math.floor(256*Math.random());
					color1b = Math.floor(256*Math.random());
					
					function color_range(num, range, range2) {
					    if (num-range < 0) return Math.min(255, Math.floor(num+range+range2*Math.random()));
						else if (num+range > 255) return Math.max(0, Math.floor(num-range-range2*Math.random()));
						else if (Math.random() < 0.5) return Math.min(255, Math.floor(num+range+range2*Math.random()));
						else return Math.max(0, Math.floor(num-range-range2*Math.random()));
					}
					
					if (level2.index == 0) {
					    color2r = color_range(color1r, 64, 32);
						color2g = color_range(color1g, 64, 32);
						color2b = color_range(color1b, 64, 32);
					} else if (level2.index == 1) {
					    color2r = color_range(color1r, 32, 16);
						color2g = color_range(color1g, 32, 16);
						color2b = color_range(color1b, 32, 16);
					} else if (level2.index == 2) {
					    color2r = color_range(color1r, 12, 12);
						color2g = color_range(color1g, 12, 12);
						color2b = color_range(color1b, 12, 12);
					} else {
					    color2r = color_range(color1r, 4, 4);
						color2g = color_range(color1g, 4, 4);
						color2b = color_range(color1b, 4, 4);
					}
					color1 = `rgb(${color1r}, ${color1g}, ${color1b})`;
					color2 = `rgb(${color2r}, ${color2g}, ${color2b})`;
					
					a = parseInt(1+91*Math.random());
					function squares_color() {
						for (let a_count = 1; a_count <= 91; a_count++) {
							ctx.fillStyle = color1;
							ctx.fillRect(3+40*((a_count-1)%13), 3+40*parseInt((a_count-1)/13), 34, 34);
							if (a_count == a) {
								ctx.fillStyle = color2;
								ctx.fillRect(3+40*((a_count-1)%13), 3+40*parseInt((a_count-1)/13), 34, 34);
								correct_x_min = 40*((a_count-1)%13);
								correct_x_max = 40*((a_count-1)%13)+39;
								correct_y_min = 40*parseInt((a_count-1)/13);
								correct_y_max = 40*parseInt((a_count-1)/13)+39;
							}
						}
					}
					squares_color();
					document.getElementById('solve').style.display = 'none';
				    document.getElementById('tipe2').style.display = 'none';
					document.getElementById('myCanvas').style.cursor = 'pointer';
					attempt_check = true;
					off_check = false;
					var x = -40;
					var y = 0;
					
					canvas.addEventListener('click', function(event) {
					    if (attempt_check) {
							const rect = canvas.getBoundingClientRect();
							// Position on canvas
							if (event.clientX > 0 || event.clientY > 0) {
								x = event.clientX - parseInt(rect.left);
								y = event.clientY - parseInt(rect.top);
							}
							// console.log(rect.left,rect.top,parseInt(rect.left),parseInt(rect.top),x,y);
							// if (x > 100 && x < 200) {
							if (x >= correct_x_min && x <= correct_x_max && y >= correct_y_min && y <= correct_y_max) {
								jawaban_teks = 'Jawabannya benar';
							} else if (x > 0 || y > 0) {
								jawaban_teks = 'Jawabannya salah';
							} else {
							    jawaban_teks = 'Soal ini tidak dijawab';
							}
							jawaban_teks2 = jawaban_teks;
							document.getElementById('jawaban').innerHTML = jawaban_teks;
							if (document.getElementById('suara').checked) {
								speak(jawaban_teks2);
							}
							clicked_num = 1+parseInt(x/40)+13*parseInt(y/40);
							ctx.clearRect(0, 0, canvas.width, canvas.height);
							// ctx.reset();
							if (document.getElementById('check2').checked || off_check) {
								ctx.fillStyle = 'red';
								ctx.fillRect(40*((clicked_num-1)%13), 40*parseInt((clicked_num-1)/13), 40, 40);
								ctx.fillStyle = 'lime';
								ctx.fillRect(40*((a-1)%13), 40*parseInt((a-1)/13), 40, 40);
								attempt_check = false;
								document.getElementById('myCanvas').style.cursor = 'default';
							} else {
								ctx.fillStyle = 'yellow';
								ctx.fillRect(40*((clicked_num-1)%13), 40*parseInt((clicked_num-1)/13), 40, 40);
							}
							squares_color();
						}
					});
				
				} else if (e1_bentuk.index == 3) {
				    if (background_index == 0) background_color = 'rgba(0,0,0,0.2)'; else background_color = 'rgba(255,255,255,0.2)';
                    soal_teks = `
                    <canvas id="myCanvas" width="520" height="280" style="background-color:${background_color};">
                    Sorry, your browser does not support canvas.
                    </canvas><br><br>
                    `;
					soal_teks += 'Klik warna yang paling berbeda!';
                    document.getElementById('soal').innerHTML = soal_teks;
                    const canvas = document.getElementById("myCanvas");
                    const ctx = canvas.getContext("2d");
                    ctx.beginPath();
					
					color1a = Math.floor(360*Math.random());
					
					function color_range(num, range, range2) {
						if (Math.random() < 0.5) return Math.floor(num+range+range2*Math.random()) % 360;
						else return Math.floor(num-range-range2*Math.random()) % 360;
					}
					
					if (level2.index == 0) color2a = color_range(color1a, 60, 30);
					else if (level2.index == 1) color2a = color_range(color1a, 30, 15);
					else if (level2.index == 2) color2a = color_range(color1a, 12, 9);
					else color2a = color_range(color1a, 6, 6);
					
					a = parseInt(1+91*Math.random());
					coor_colors_list = [];
					
					for (let a_count = 1; a_count <= 91; a_count++) {
						color1b = Math.floor(33+34*Math.random());
						color1c = Math.floor(33+34*Math.random());
						color1 = `hsl(${color1a}, ${color1b}%, ${color1c}%)`;
						if (a_count == a) {
							color2b = Math.floor(33+34*Math.random());
							color2c = Math.floor(33+34*Math.random());
							color2 = `hsl(${color2a}, ${color2b}%, ${color2c}%)`;
							coor_colors_list.push(color2);
						} else {
							coor_colors_list.push(color1);
						}
					}
					
					function squares_color() {
						for (let a_count = 1; a_count <= 91; a_count++) {
							ctx.fillStyle = coor_colors_list[a_count-1];
							ctx.fillRect(3+40*((a_count-1)%13), 3+40*parseInt((a_count-1)/13), 34, 34);
							if (a_count == a) {
								correct_x_min = 40*((a_count-1)%13);
								correct_x_max = 40*((a_count-1)%13)+39;
								correct_y_min = 40*parseInt((a_count-1)/13);
								correct_y_max = 40*parseInt((a_count-1)/13)+39;
							}
						}
					}
					squares_color();
					document.getElementById('solve').style.display = 'none';
				    document.getElementById('tipe2').style.display = 'none';
					document.getElementById('myCanvas').style.cursor = 'pointer';
					attempt_check = true;
					off_check = false;
					var x = -40;
					var y = 0;
					
					canvas.addEventListener('click', function(event) {
					    if (attempt_check) {
							const rect = canvas.getBoundingClientRect();
							// Position on canvas
							if (event.clientX > 0 || event.clientY > 0) {
								x = event.clientX - parseInt(rect.left);
								y = event.clientY - parseInt(rect.top);
							}
							// console.log(rect.left,rect.top,parseInt(rect.left),parseInt(rect.top),x,y);
							// if (x > 100 && x < 200) {
							if (x >= correct_x_min && x <= correct_x_max && y >= correct_y_min && y <= correct_y_max) {
								jawaban_teks = 'Jawabannya benar';
							} else if (x > 0 || y > 0) {
								jawaban_teks = 'Jawabannya salah';
							} else {
							    jawaban_teks = 'Soal ini tidak dijawab';
							}
							jawaban_teks2 = jawaban_teks;
							document.getElementById('jawaban').innerHTML = jawaban_teks;
							if (document.getElementById('suara').checked) {
								speak(jawaban_teks2);
							}
							clicked_num = 1+parseInt(x/40)+13*parseInt(y/40);
							ctx.clearRect(0, 0, canvas.width, canvas.height);
							// ctx.reset();
							if (document.getElementById('check2').checked || off_check) {
								ctx.fillStyle = 'red';
								ctx.fillRect(40*((clicked_num-1)%13), 40*parseInt((clicked_num-1)/13), 40, 40);
								ctx.fillStyle = 'lime';
								ctx.fillRect(40*((a-1)%13), 40*parseInt((a-1)/13), 40, 40);
								attempt_check = false;
								// document.getElementById('myCanvas').style.cursor = 'not-allowed';
								document.getElementById('myCanvas').style.cursor = 'default';
							} else {
								ctx.fillStyle = 'yellow';
								ctx.fillRect(40*((clicked_num-1)%13), 40*parseInt((clicked_num-1)/13), 40, 40);
							}
							squares_color();
						}
					});
					
				} else if (e1_bentuk.index == 4) {
					if (background_index == 0) background_color = 'rgba(0,0,0,0.2)'; else background_color = 'rgba(255,255,255,0.2)';
                    soal_teks = `
                    <canvas id="myCanvas" width="520" height="280" style="background-color:${background_color};">
                    Sorry, your browser does not support canvas.
                    </canvas><br><br>
                    `;
					soal_teks += 'Banyaknya warna yang berbeda adalah ...';
                    document.getElementById('soal').innerHTML = soal_teks;
                    const canvas = document.getElementById("myCanvas");
                    const ctx = canvas.getContext("2d");
                    ctx.beginPath();
					
					color1r = Math.floor(256*Math.random());
					color1g = Math.floor(256*Math.random());
					color1b = Math.floor(256*Math.random());
					
					function color_range(num, range, range2) {
					    if (num-range < 0) return Math.min(255, Math.floor(num+range+range2*Math.random()));
						else if (num+range > 255) return Math.max(0, Math.floor(num-range-range2*Math.random()));
						else if (Math.random() < 0.5) return Math.min(255, Math.floor(num+range+range2*Math.random()));
						else return Math.max(0, Math.floor(num-range-range2*Math.random()));
					}
					
					if (level2.index == 0) {
					    color2r = color_range(color1r, 64, 32);
						color2g = color_range(color1g, 64, 32);
						color2b = color_range(color1b, 64, 32);
						colors_count = parseInt(1+5*Math.random());
					} else if (level2.index == 1) {
					    color2r = color_range(color1r, 32, 16);
						color2g = color_range(color1g, 32, 16);
						color2b = color_range(color1b, 32, 16);
						colors_count = parseInt(3+8*Math.random());
					} else if (level2.index == 2) {
					    color2r = color_range(color1r, 12, 12);
						color2g = color_range(color1g, 12, 12);
						color2b = color_range(color1b, 12, 12);
						colors_count = parseInt(5+11*Math.random());
					} else {
					    color2r = color_range(color1r, 4, 4);
						color2g = color_range(color1g, 4, 4);
						color2b = color_range(color1b, 4, 4);
						colors_count = parseInt(11+15*Math.random());
					}
					color1 = `rgb(${color1r}, ${color1g}, ${color1b})`;
					color2 = `rgb(${color2r}, ${color2g}, ${color2b})`;
					
					hasil = colors_count;
					a_list = [];
					for (let i = 1; i <= colors_count; i++) {
						if (i == 1) {
							a = parseInt(1+91*Math.random());
						} else {
							a = parseInt(1+91*Math.random());
							while (a_list.includes(a)) {
								a = parseInt(1+91*Math.random());
							}
						}
						a_list.push(a);
					}
					for (let a_count = 1; a_count <= 91; a_count++) {
						ctx.fillStyle = color1;
						ctx.fillRect(3+40*((a_count-1)%13), 3+40*parseInt((a_count-1)/13), 34, 34);
						if (a_list.includes(a_count)) {
							ctx.fillStyle = color2;
							ctx.fillRect(3+40*((a_count-1)%13), 3+40*parseInt((a_count-1)/13), 34, 34);
						}
					}
					
				} else {
					if (background_index == 0) background_color = 'rgba(0,0,0,0.2)'; else background_color = 'rgba(255,255,255,0.2)';
                    soal_teks = `
                    <canvas id="myCanvas" width="520" height="280" style="background-color:${background_color};">
                    Sorry, your browser does not support canvas.
                    </canvas><br><br>
                    `;
					soal_teks += 'Banyaknya warna yang berbeda adalah ...';
                    document.getElementById('soal').innerHTML = soal_teks;
                    const canvas = document.getElementById("myCanvas");
                    const ctx = canvas.getContext("2d");
                    ctx.beginPath();
					
					color1a = Math.floor(256*Math.random());
					
					function color_range(num, range, range2) {
					    if (num-range < 0) return Math.min(255, Math.floor(num+range+range2*Math.random()));
						else if (num+range > 255) return Math.max(0, Math.floor(num-range-range2*Math.random()));
						else if (Math.random() < 0.5) return Math.min(255, Math.floor(num+range+range2*Math.random()));
						else return Math.max(0, Math.floor(num-range-range2*Math.random()));
					}
					
					if (level2.index == 0) {
						color2a = color_range(color1a, 60, 30);
						colors_count = parseInt(1+5*Math.random());
					} else if (level2.index == 1) {
						color2a = color_range(color1a, 30, 15);
						colors_count = parseInt(3+8*Math.random());
					} else if (level2.index == 2) {
						color2a = color_range(color1a, 12, 9);
						colors_count = parseInt(5+11*Math.random());
					} else {
						color2a = color_range(color1a, 6, 6);
						colors_count = parseInt(11+15*Math.random());
					}
					
					hasil = colors_count;
					a_list = [];
					for (let i = 1; i <= colors_count; i++) {
						if (i == 1) {
							a = parseInt(1+91*Math.random());
						} else {
							a = parseInt(1+91*Math.random());
							while (a_list.includes(a)) {
								a = parseInt(1+91*Math.random());
							}
						}
						a_list.push(a);
					}
					for (let a_count = 1; a_count <= 91; a_count++) {
						color1b = Math.floor(33+34*Math.random());
						color1c = Math.floor(33+34*Math.random());
						color1 = `hsl(${color1a}, ${color1b}%, ${color1c}%)`;
						ctx.fillStyle = color1;
						ctx.fillRect(3+40*((a_count-1)%13), 3+40*parseInt((a_count-1)/13), 34, 34);
						if (a_list.includes(a_count)) {
							color2b = Math.floor(33+34*Math.random());
							color2c = Math.floor(33+34*Math.random());
							color2 = `hsl(${color2a}, ${color2b}%, ${color2c}%)`;
							ctx.fillStyle = color2;
							ctx.fillRect(3+40*((a_count-1)%13), 3+40*parseInt((a_count-1)/13), 34, 34);
						}
					}
				}
                
			} else if (e1.index == 2) {
                if (e1_bentuk.index == 0 || e1_bentuk.index == 1) {
                    // <canvas id="myCanvas" width="500" height="300" style="border:1px solid #000000;">
					if (background_index == 0) background_color = 'white'; else background_color = '#202020';
                    soal_teks = `
                    <canvas id="myCanvas" width="500" height="300" style="background-color:${background_color}; border:1px solid gray;">
                    Sorry, your browser does not support canvas.
                    </canvas><br><br>
                    `;
                    if (e1_bentuk.index == 0) soal_teks += 'Batang terpanjang ada di nomor ...';
                    else soal_teks += 'Garis terpanjang ada di nomor ...';
                    document.getElementById('soal').innerHTML = soal_teks;
                    const canvas = document.getElementById("myCanvas");
                    const ctx = canvas.getContext("2d");
                    ctx.beginPath();
                    tinggi_list = [];
                    if (level2.index == 0) {
                        jumlah_batang = 5;
                        ukuran_batang = 40;
                        for (let i = 1; i <= jumlah_batang; i++) {
                            if (i == 1) tinggi = Math.floor(60 + 20 * Math.random());
                            else tinggi += Math.floor(20 + 10 * Math.random());
                            tinggi_list.push(tinggi);
                        }
                        console.log(tinggi_list);
                        ctx.font = "24px arial";
                    } else if (level2.index == 1) {
                        jumlah_batang = 10;
                        ukuran_batang = 20;
                        for (let i = 1; i <= jumlah_batang; i++) {
                            if (i == 1) tinggi = Math.floor(60 + 20 * Math.random());
                            else if (i <= jumlah_batang-1) tinggi += Math.floor(10 * Math.random());
                            else tinggi += Math.floor(5 + 5 * Math.random());
                            tinggi_list.push(tinggi);
                        }
                        ctx.font = "24px arial";
                    } else if (level2.index == 2) {
                        jumlah_batang = 15;
                        ukuran_batang = 15;
                        for (let i = 1; i <= jumlah_batang; i++) {
                            if (i == 1) tinggi = Math.floor(60 + 20 * Math.random());
                            else if (i <= jumlah_batang-1) tinggi += Math.floor(6 * Math.random());
                            else tinggi += Math.floor(3 + 3 * Math.random());
                            tinggi_list.push(tinggi);
                        }
                        ctx.font = "16px arial";
                    } else {
                        jumlah_batang = 20;
                        ukuran_batang = 15;
                        for (let i = 1; i <= jumlah_batang; i++) {
                            if (i == 1) tinggi = Math.floor(60 + 20 * Math.random());
                            else if (i <= jumlah_batang-1) tinggi += Math.floor(4 * Math.random());
                            else tinggi += Math.floor(2 + 2 * Math.random());
                            tinggi_list.push(tinggi);
                        }
                        ctx.font = "16px arial";
                    }
                    tinggi_list = tinggi_list.sort(() => .5 - Math.random());
                    tinggi_list = tinggi_list.slice(0,jumlah_batang);
                    console.log(tinggi_list);
                    hasil = 1+tinggi_list.indexOf(tinggi);
                    if (background_index == 0) ctx.fillStyle = "#c0c0c0"; else ctx.fillStyle = "#404040";
                    ctx.fillRect(0, 260, 500, 40);
                    ctx.textAlign = "center";
					ctx.textBaseline = "middle";
                    for (let i = 1; i <= jumlah_batang; i++) {
                        // ctx.beginPath();
                        if (e1_bentuk.index == 0) {
							if (background_index == 0) ctx.fillStyle = "#404040"; else ctx.fillStyle = "white";
                            ctx.fillRect(parseInt(500*i/(jumlah_batang+1)-ukuran_batang/2), 260-tinggi_list[i-1], ukuran_batang, tinggi_list[i-1]);
                        } else {
                            ctx.beginPath();
                            if (background_index == 0) ctx.fillStyle = "#404040"; else ctx.fillStyle = "white";
                            ctx.moveTo(parseInt(500*i/(jumlah_batang+1)),260);
                            ctx.lineTo(parseInt(500*i/(jumlah_batang+1)),260-tinggi_list[i-1]);
                            ctx.lineWidth = 5;
                            if (background_index == 0) ctx.strokeStyle = "#404040"; else ctx.strokeStyle = "white";
                            ctx.stroke();
                        }
						if (background_index == 0) ctx.fillStyle = "black"; else ctx.fillStyle = "white";
                        ctx.fillText(i,parseInt(500*i/(jumlah_batang+1)),280);
                        // ctx.fill();
                    }
                    if (tipe2.index == 1) {
                        for (let i = 1; i <= j_pilihan2; i++) {
                            value_check = true;
                            while (value_check || pilihan_list.indexOf(value) > -1 || value == hasil) {
                                value = Math.floor(a/2+Math.max(a,6)*Math.random());
                                value_check = false;
                            }
                            pilihan_list.push(value);
                        }
                    }
                } else if (e1_bentuk.index == 2) {
					if (level2.index == 0) width = 450;
					else if (level2.index == 1) width = 600;
					else if (level2.index == 2) width = 750;
					else width = 750;
					if (background_index == 0) background_color = 'white'; else background_color = '#202020';
					soal_teks = `
					<canvas id="myCanvas" width="${width}" height="360" style="background-color:${background_color}; border:1px solid gray;">
					Sorry, your browser does not support canvas.
					</canvas><br><br>
					`;
                    soal_teks += 'Garis terpanjang ada di nomor ...';
                    document.getElementById('soal').innerHTML = soal_teks;
                    const canvas = document.getElementById("myCanvas");
                    const ctx = canvas.getContext("2d");
                    ctx.beginPath();
                    tinggi_list = [];
                    if (level2.index == 0) {
                        jumlah_garis = 6;
                        for (let i = 1; i <= jumlah_garis; i++) {
                            if (i == 1) tinggi = Math.floor(30 + 10 * Math.random());
                            else tinggi += Math.floor(10 + 10 * Math.random());
                            tinggi_list.push(tinggi);
                        }
                        console.log(tinggi_list);
                    } else if (level2.index == 1) {
                        jumlah_garis = 8;
                        for (let i = 1; i <= jumlah_garis; i++) {
                            if (i == 1) tinggi = Math.floor(40 + 20 * Math.random());
                            else if (i <= jumlah_garis-1) tinggi += Math.floor(10 * Math.random());
                            else tinggi += Math.floor(5 + 5 * Math.random());
                            tinggi_list.push(tinggi);
                        }
                    } else if (level2.index == 2) {
                        jumlah_garis = 10;
                        for (let i = 1; i <= jumlah_garis; i++) {
                            if (i == 1) tinggi = Math.floor(40 + 20 * Math.random());
                            else if (i <= jumlah_garis-1) tinggi += Math.floor(8 * Math.random());
                            else tinggi += Math.floor(4 + 4 * Math.random());
                            tinggi_list.push(tinggi);
                        }
                    } else {
                        jumlah_garis = 10;
                        for (let i = 1; i <= jumlah_garis; i++) {
                            if (i == 1) tinggi = Math.floor(50 + 30 * Math.random());
                            else if (i <= jumlah_garis-1) tinggi += Math.floor(6 * Math.random());
                            else tinggi += Math.floor(3 + 3 * Math.random());
                            tinggi_list.push(tinggi);
                        }
                    }
					ctx.font = "24px arial";
                    tinggi_list = tinggi_list.sort(() => .5 - Math.random());
                    tinggi_list = tinggi_list.slice(0,jumlah_garis);
                    console.log(tinggi_list);
                    hasil = 1+tinggi_list.indexOf(tinggi);
                    if (background_index == 0) ctx.fillStyle = "#c0c0c0"; else ctx.fillStyle = "#404040";
                    ctx.fillRect(0, 150, 750, 30);
					ctx.fillRect(0, 330, 750, 30);
                    ctx.textAlign = "center";
					ctx.textBaseline = "middle";
                    for (let i = 1; i <= jumlah_garis; i++) {
						ctx.beginPath();
						if (background_index == 0) ctx.fillStyle = "#404040"; else ctx.fillStyle = "white";
						radian = Math.PI*Math.random();
						ctx.moveTo(parseInt(75+150*((i-1)%parseInt(jumlah_garis/2))+tinggi_list[i-1]/2*Math.cos(radian)),parseInt(75+180*parseInt((2*i-2)/jumlah_garis)+tinggi_list[i-1]/2*Math.sin(radian)));
						ctx.lineTo(parseInt(75+150*((i-1)%parseInt(jumlah_garis/2))-tinggi_list[i-1]/2*Math.cos(radian)),parseInt(75+180*parseInt((2*i-2)/jumlah_garis)-tinggi_list[i-1]/2*Math.sin(radian)));
						ctx.lineWidth = 5;
						if (background_index == 0) ctx.strokeStyle = "#404040"; else ctx.strokeStyle = "white";
						ctx.stroke();
						if (background_index == 0) ctx.fillStyle = "black"; else ctx.fillStyle = "white";
                        ctx.fillText(i,parseInt(75+150*((i-1)%parseInt(jumlah_garis/2))),parseInt(165+180*parseInt((2*i-2)/jumlah_garis)));
                        // ctx.fill();
                    }
                    if (tipe2.index == 1) {
                        for (let i = 1; i <= j_pilihan2; i++) {
                            value_check = true;
                            while (value_check || pilihan_list.indexOf(value) > -1 || value == hasil) {
                                value = Math.floor(a/2+Math.max(a,6)*Math.random());
                                value_check = false;
                            }
                            pilihan_list.push(value);
                        }
                    }
				} else if (e1_bentuk.index == 3 || e1_bentuk.index == 4) {
					if (level2.index == 0) width = 450;
					else if (level2.index == 1) width = 600;
					else if (level2.index == 2) width = 750;
					else width = 750;
					if (background_index == 0) background_color = 'white'; else background_color = '#202020';
					soal_teks = `
					<canvas id="myCanvas" width="${width}" height="360" style="background-color:${background_color}; border:1px solid gray;">
					Sorry, your browser does not support canvas.
					</canvas><br><br>
					`;
					bentuk_index = parseInt(3*Math.random());
					if (bentuk_index == 0) nama_bentuk = 'Persegi';
					else if (bentuk_index == 1) nama_bentuk = 'Lingkaran';
					else nama_bentuk = 'Segitiga';
                    if (e1_bentuk.index == 3) soal_teks += `${nama_bentuk} yang ukurannya berbeda sendiri terletak di nomor ...`;
					else soal_teks += `${nama_bentuk} terbesar terletak di nomor ...`;
                    document.getElementById('soal').innerHTML = soal_teks;
                    const canvas = document.getElementById("myCanvas");
                    const ctx = canvas.getContext("2d");
                    ctx.beginPath();
                    tinggi_list = [];
                    if (level2.index == 0) {
                        jumlah_garis = 6;
                        for (let i = 1; i <= jumlah_garis; i++) {
							if (e1_bentuk.index == 3) {
								if (i == 1) tinggi = Math.floor(40 + 70 * Math.random());
								else if (i == jumlah_garis) tinggi += Math.floor(15 + 10 * Math.random());
							} else {
								if (i == 1) tinggi = Math.floor(40 + 10 * Math.random());
								else tinggi += Math.floor(10 + 5 * Math.random());
							}
							tinggi_list.push(tinggi);
                        }
                        console.log(tinggi_list);
                    } else if (level2.index == 1) {
                        jumlah_garis = 8;
                        for (let i = 1; i <= jumlah_garis; i++) {
							if (e1_bentuk.index == 3) {
								if (i == 1) tinggi = Math.floor(40 + 70 * Math.random());
								else if (i == jumlah_garis) tinggi += Math.floor(10 + 5 * Math.random());
							} else {
								if (i == 1) tinggi = Math.floor(50 + 20 * Math.random());
								else if (i <= jumlah_garis-1) tinggi += Math.floor(10 * Math.random());
								else tinggi += Math.floor(5 + 5 * Math.random());
							}
							tinggi_list.push(tinggi);
                        }
                    } else if (level2.index == 2) {
                        jumlah_garis = 10;
                        for (let i = 1; i <= jumlah_garis; i++) {
							if (e1_bentuk.index == 3) {
								if (i == 1) tinggi = Math.floor(40 + 70 * Math.random());
								else if (i == jumlah_garis) tinggi += Math.floor(5 + 5 * Math.random());
							} else {
								if (i == 1) tinggi = Math.floor(60 + 20 * Math.random());
								else if (i <= jumlah_garis-1) tinggi += Math.floor(6 * Math.random());
								else tinggi += Math.floor(3 + 3 * Math.random());
							}
							tinggi_list.push(tinggi);
                        }
                    } else {
                        jumlah_garis = 10;
                        for (let i = 1; i <= jumlah_garis; i++) {
							if (e1_bentuk.index == 3) {
								if (i == 0) tinggi = Math.floor(40 + 70 * Math.random());
								else if (i == jumlah_garis) tinggi += Math.floor(3 + 3 * Math.random());
							} else {
								if (i == 1) tinggi = Math.floor(60 + 20 * Math.random());
								else if (i <= jumlah_garis-1) tinggi += Math.floor(4 * Math.random());
								else tinggi += Math.floor(2 + 2 * Math.random());
							}
							tinggi_list.push(tinggi);
                        }
                    }
					ctx.font = "24px arial";
                    tinggi_list = tinggi_list.sort(() => .5 - Math.random());
                    tinggi_list = tinggi_list.slice(0,jumlah_garis);
                    console.log(tinggi_list);
                    hasil = 1+tinggi_list.indexOf(tinggi);
                    if (background_index == 0) ctx.fillStyle = "#c0c0c0"; else ctx.fillStyle = "#404040";
                    ctx.fillRect(0, 150, 750, 30);
					ctx.fillRect(0, 330, 750, 30);
                    ctx.textAlign = "center";
					ctx.textBaseline = "middle";
                    for (let i = 1; i <= jumlah_garis; i++) {
						// ctx.moveTo(parseInt(75+150*((i-1)%parseInt(jumlah_garis/2))+tinggi_list[i-1]/2*Math.cos(radian)),parseInt(75+180*parseInt((2*i-2)/jumlah_garis)+tinggi_list[i-1]/2*Math.sin(radian)));
                        if (bentuk_index == 0) {
							if (background_index == 0) ctx.fillStyle = "#404040"; else ctx.fillStyle = "white";
							ctx.fillRect(parseInt(75+150*((i-1)%parseInt(jumlah_garis/2))-tinggi_list[i-1]/2),parseInt(75+180*parseInt((2*i-2)/jumlah_garis)-tinggi_list[i-1]/2), tinggi_list[i-1], tinggi_list[i-1]);
                        } else if (bentuk_index == 1) {
							ctx.beginPath();
							if (background_index == 0) ctx.fillStyle = "#404040"; else ctx.fillStyle = "white";
							ctx.arc(parseInt(75+150*((i-1)%parseInt(jumlah_garis/2))),parseInt(75+180*parseInt((2*i-2)/jumlah_garis)),parseInt(tinggi_list[i-1]/2),0,2*Math.PI);
							ctx.fill();
						} else {
							ctx.beginPath();
                            if (background_index == 0) ctx.fillStyle = "#404040"; else ctx.fillStyle = "white";
                            ctx.moveTo(parseInt(75+150*((i-1)%parseInt(jumlah_garis/2))),parseInt(75+180*parseInt((2*i-2)/jumlah_garis)-tinggi_list[i-1]/2));
							ctx.lineTo(parseInt(75+150*((i-1)%parseInt(jumlah_garis/2))+tinggi_list[i-1]*3**0.5/4),parseInt(75+180*parseInt((2*i-2)/jumlah_garis)+tinggi_list[i-1]/4));
							ctx.lineTo(parseInt(75+150*((i-1)%parseInt(jumlah_garis/2))-tinggi_list[i-1]*3**0.5/4),parseInt(75+180*parseInt((2*i-2)/jumlah_garis)+tinggi_list[i-1]/4));
							ctx.lineTo(parseInt(75+150*((i-1)%parseInt(jumlah_garis/2))),parseInt(75+180*parseInt((2*i-2)/jumlah_garis)-tinggi_list[i-1]/2));
                            // ctx.lineWidth = 5;
							ctx.fill();
                            // ctx.stroke();
						}
						if (background_index == 0) ctx.fillStyle = "black"; else ctx.fillStyle = "white";
						ctx.fillText(i,parseInt(75+150*((i-1)%parseInt(jumlah_garis/2))),parseInt(165+180*parseInt((2*i-2)/jumlah_garis)));
                        // ctx.fill();
                    }
				} else {
					if (background_index == 0) background_color = 'white'; else background_color = '#202020';
                    soal_teks = `
                    <canvas id="myCanvas" width="500" height="300" style="background-color:${background_color}; border:1px solid gray;">
                    Sorry, your browser does not support canvas.
                    </canvas><br><br>
                    `;
					if (level2.index == 0) {length_scale = Math.floor(20+20*Math.random()); line_min_length = 3;}
					else if (level2.index == 1) {length_scale = Math.floor(10+10*Math.random()); line_min_length = 5;}
					else if (level2.index == 2) {length_scale = Math.floor(6+4*Math.random()); line_min_length = 7;}
					else {length_scale = Math.floor(3+3*Math.random()); line_min_length = 10;}
					line_max_length = Math.floor(400/length_scale);
					while (typeof a2 === 'undefined' || a == a2) {
						a2 = Math.floor(line_min_length+(line_max_length-line_min_length)*Math.random());
					}
					a = a2;
					line_length = a2;
                    if (background_index == 0) soal_teks += 'Jika panjang garis hitam adalah '; else soal_teks += 'Jika panjang garis putih adalah ';
					soal_teks += `${line_length} satuan, maka panjang garis merah dalam bilangan bulat adalah ... satuan`;
                    document.getElementById('soal').innerHTML = soal_teks;
                    const canvas = document.getElementById("myCanvas");
                    const ctx = canvas.getContext("2d");
                    // ctx.beginPath();
					line2_min_length = line_min_length;
					line2_max_length = Math.floor(400/length_scale);
					line2_length = Math.floor(line2_min_length+(line2_max_length-line2_min_length)*Math.random());
                    hasil = line2_length;
					ctx.beginPath();
					if (background_index == 0) ctx.fillStyle = "black"; else ctx.fillStyle = "white";
					ctx.moveTo(50,50);
					ctx.lineTo(50+length_scale*line_length,50);
					ctx.lineWidth = 5;
					ctx.strokeStyle = ctx.fillStyle;
					ctx.stroke();
					ctx.beginPath();
					ctx.fillStyle = "red";
					ctx.moveTo(50,150);
					ctx.lineTo(50+length_scale*line2_length,150);
					ctx.lineWidth = 5;
					ctx.strokeStyle = ctx.fillStyle;
					ctx.stroke();
				}
            }
			
			// document.getElementById('soal').innerHTML = soal_teks;
            // MathJax.typeset();
            if (document.getElementById('suara').checked) {
                // speak(soal_teks);
                speak(soal_suara);
            }

            if (tipe2.index == 0) {
                // document.getElementById("pilihan").style.display = "none";
                // <input type="number" id="angka" min="0">
				// <label>Input jawaban</label><br>
                if (false && e1.index == 0 && [2,3].includes(e1_bentuk.index)) {
                    document.getElementById('tipe2').innerHTML = `
					Isilah di input jawaban yang menurut Anda benar!<br><br>
					<label><b>Input jawaban</b></label><br><br>
                    <input type="text" id="angka" min="0" style="width:400px">
                    `;
                } else {
                    document.getElementById('tipe2').innerHTML = `
                    Isilah dengan jawaban yang menurut Anda benar!<br><br>
					<label><b>Input jawaban</b></label><br>
                    <input type="text" id="angka" min="0">
                    `;
                }
                var input = document.getElementById("angka");
                input.addEventListener("keypress", function(event) {
                    if (event.key === "Enter") {
                        event.preventDefault();
                        document.getElementById("solve").click();
                    }
                });
				/* var input2 = document;
				input2.addEventListener("keypress", function(event) {
                    if (event.key === "N" || event.key === "n") {
						console.log(100);
                        event.preventDefault();
                        document.getElementById("buat-soal").click();
                    }
                }); */
                // hasil = 0;
                // console.log(11111);
                hasil2 = hasil;
                // console.log(hasil2);

            } else {
                // pilihan_list = pilihan_list.sort( () => .5 - Math.random() );
                if (random_check) {
                    pilihan_list = pilihan_list.sort(() => .5 - Math.random());
                    pilihan_list = pilihan_list.slice(0,j_pilihan2);
                    pilihan_list[pilihan_index] = hasil;
                }
				
				// if (pilihan_index == 0) {hasil2 = hasil + ' (A)';}
                if (pilihan_index == 0) {hasil2 = hasil + '<br><br>A. ' + hasil;}
				else if (pilihan_index == 1) {hasil2 = hasil + '<br><br>B. ' + hasil;}
				else if (pilihan_index == 2) {hasil2 = hasil + '<br><br>C. ' + hasil;}
				else if (pilihan_index == 3) {hasil2 = hasil + '<br><br>D. ' + hasil;}
				else if (pilihan_index == 4) {hasil2 = hasil + '<br><br>E. ' + hasil;}
				else {hasil2 = hasil + '<br><br>F. ' + hasil;}
				
                // <div class="column">
                // <label class="rb-container" style="width:150px;">
				// <input type="radio" id="pilihan1" value="${pilihan_list[0]}" name="pilihan" value="0">
				// <span>Pilihan jawaban</span><br><br>
                document.getElementById('tipe2').innerHTML = `
				Pilihlah jawaban yang benar!<br><br>
                <label><b>Pilihan jawaban</b></label><br><div style="padding-top:10px"></div>
                <label class="rb-container">A. ${pilihan_list[0]}
                    <input type="radio" id="pilihan1" value="${pilihan_list[0]}" name="pilihan">
                    <span class="checkradio"></span>
                </label>
                <label class="rb-container">B. ${pilihan_list[1]}
                    <input type="radio" id="pilihan2" value="${pilihan_list[1]}" name="pilihan">
                    <span class="checkradio"></span>
                </label>
                `;
                if (j_pilihan2 >= 3) {
                    document.getElementById('tipe2').innerHTML += `
                    <label class="rb-container">C. ${pilihan_list[2]}
                        <input type="radio" id="pilihan3" value="${pilihan_list[2]}" name="pilihan">
                        <span class="checkradio"></span>
                    </label>
                    `;
                }
                if (j_pilihan2 >= 4) {
                    document.getElementById('tipe2').innerHTML += `
                    <label class="rb-container">D. ${pilihan_list[3]}
                        <input type="radio" id="pilihan4" value="${pilihan_list[3]}" name="pilihan">
                        <span class="checkradio"></span>
                    </label>
                    `;
                }
                if (j_pilihan2 >= 5) {
                    document.getElementById('tipe2').innerHTML += `
                    <label class="rb-container">E. ${pilihan_list[4]}
                        <input type="radio" id="pilihan5" value="${pilihan_list[4]}" name="pilihan">
                        <span class="checkradio"></span>
                    </label>
                    `;
                }
				if (j_pilihan2 == 6) {
                    document.getElementById('tipe2').innerHTML += `
                    <label class="rb-container">F. ${pilihan_list[5]}
                        <input type="radio" id="pilihan6" value="${pilihan_list[5]}" name="pilihan">
                        <span class="checkradio"></span>
                    </label>
                    <div class="clearfix"></div><br>
                    `;
                }
            }
		}
		
		hasil = 0;

        function pilihan(change=false) {
		    var e = document.getElementById("bentuk");
            var e1 = e.options[e.selectedIndex];
            
            e_bentuk = document.getElementById("pilihan-bentuk-sub");
            e1_bentuk = e_bentuk.options[e_bentuk.selectedIndex];

            if (change) hasil = 0;

            document.getElementById("bentuk-penjelasan").innerHTML = '';
            // if (e1.index <= 5) {
            if (e1.index == 0) {
			    document.getElementById("bentuk-sub").style.display = 'block';
				document.getElementById("bentuk-penjelasan").innerHTML = `
				Mata adalah organ penglihatan. Mata mendeteksi cahaya dan mengubahnya menjadi impuls elektrokimia pada sel saraf.
                <br><br>
				Penglihatan (bahasa Inggris: sight, vision) adalah kemampuan untuk mengenali cahaya dan menafsirkannya, salah satu dari indra.
				<br><br>
				Sumber: Wikipedia
				`;
                if (change) {
                    document.getElementById("pilihan-bentuk-sub").innerHTML = `
                        <option>Berhitung</option>
                        <option>Berhitung 2</option>
						<option>Representasi bilangan</option>
                        <option>Melihat angka yang tersembunyi</option>
						<option>Melihat huruf yang tersembunyi</option>
						<option>Perbedaan Gambar</option>
						<option>Perbedaan Gambar 2</option>
                    `;
                }
			} else if (e1.index == 1) {
                document.getElementById("bentuk-sub").style.display = 'block';
				document.getElementById("bentuk-penjelasan").innerHTML = `
				<b>Buta warna</b> adalah suatu kelainan yang disebabkan ketidakmampuan sel-sel kerucut mata untuk menangkap suatu spektrum warna tertentu (Buta warna parsial) atau bahkan seluruh spektrum warna (Buta warna total) yang disebabkan oleh faktor genetis.
                <br><br>
				Buta warna merupakan penyakit seumur hidup. Agar penderita dapat beradaptasi dengan kondisi ini, dokter akan memberikan penanganan sesuai dengan jenis buta warna yang diderita.
				<br><br>
				Sumber: Wikipedia
				<br><br>
				Tes Buta Warna digunakan untuk mengukur seberapa jauh mata dapat membedakan warna.
				`;
                if (change) {
                    document.getElementById("pilihan-bentuk-sub").innerHTML = `
                        <option>Tes Buta Warna Angka</option>
                        <option>Tes Buta Warna Angka 2</option>
                        <option>Perbedaan Warna</option>
						<option>Perbedaan Warna 2</option>
						<option>Menghitung Warna</option>
						<option>Menghitung Warna 2</option>
                    `;
                }
            } else if (e1.index == 2) {
                document.getElementById("bentuk-sub").style.display = 'block';
				document.getElementById("bentuk-penjelasan").innerHTML = `
				<b>Akurasi</b> adalah ukuran yang menentukan tingkat kemiripan antara hasil pengukuran dengan nilai yang sebenarnya diukur. Dalam bidang pengukuran, akurasi lebih dikhususkan pada ketidakpastian pengukuran dari alat ukur. Akurasi ditetapkan untuk mengetahui seberapa besar tingkat kesalahan pengukuran yang dapat terjadi pada suatu alat ukur.
				<br><br>
				Sumber: Wikipedia
				`;
				if (change) {
                    document.getElementById("pilihan-bentuk-sub").innerHTML = `
                        <option>Perbandingan Panjang Batang</option>
                        <option>Perbandingan Panjang Garis</option>
                        <option>Perbandingan Panjang Garis 2</option>
						<option>Perbedaan Ukuran Bentuk</option>
						<option>Perbandingan Ukuran Bentuk</option>
						<option>Mengukur Panjang Garis</option>
						<option>Luas Persegi Panjang</option>
                        <option>Perbandingan Luas Persegi Panjang</option>
						<option>Besar Sudut</option>
						<option>Perbandingan Besar Sudut</option>
						<option>Perbandingan Banyak Objek</option>
                    `;
                }
            } else if (e1.index == 3) {
                document.getElementById("bentuk-sub").style.display = 'block';
                if (change) {
                    document.getElementById("pilihan-bentuk-sub").innerHTML = `
                        <option>Tabel 3x3</option>
                        <option>Tabel 4x4</option>
						<option>Pola dalam Matematika</option>
						<option>Struktur DNA Asing</option>
						<option>Bahasa Hipotesis</option>
                    `;
                }
			} else if (e1.index == 4) {
                document.getElementById("bentuk-sub").style.display = 'block';
                if (change) {
                    document.getElementById("pilihan-bentuk-sub").innerHTML = `
                        <option>Tes Memori Kotak</option>
						<option>Tes Memori Kata</option>
						<option>Tes Memori Huruf</option>
                    `;
                }
            } else {
                document.getElementById("bentuk-sub").style.display = 'none';
            }
			
            document.getElementById("bentuk-penjelasan").style.lineHeight = '1.5em';

            var bs = document.getElementById("pilihan-bentuk-soal");
            var bs2 = bs.options[bs.selectedIndex];

            document.getElementById("cerita2").innerHTML = '<option>Option 1</option>';
            // document.getElementById("bentuk-soal").style.display = 'block';
            document.getElementById("bentuk-soal").style.display = 'none';

            if (e1.index >= 1 && e1.index <= 4) {
                if (change) {
                    document.getElementById("pilihan-bentuk-soal").innerHTML = `
                        <option>Tulisan Datar</option>
                        <option>Bentuk Bersusun</option>
                    `;
                }

                // var bs = document.getElementById("pilihan-bentuk-soal");
                // var bs2 = bs.options[bs.selectedIndex];

                if (bs2.index == 0) {
                    // \documentclass{article}
                    // \usepackage{longdivision}
                    // \begin{document}
                    // \intlongdivision{12345}{13}
                    // \end{document}
                    document.getElementById("contoh-bentuk-soal").innerHTML = `
                    <span>
                    Contoh:<br><br>
                    Hasil dari 123 + 45 adalah ...
                    </span>
                    `;
                } else {
                    document.getElementById("contoh-bentuk-soal").innerHTML = `
                    <span>
                    Contoh:<br><br>
                    <div class="column" style="font-size:20px; width:15px">&nbsp;</div>
                    <div class="column" style="font-size:20px; width:15px">1</div>
                    <div class="column" style="font-size:20px; width:15px">2</div>
                    <div class="column" style="font-size:20px; width:15px">3</div>
                    <div class="clearfix"></div>
                    <div class="column" style="font-size:20px; width:15px">+</div>
                    <div class="column" style="font-size:20px; width:15px">&nbsp;</div>
                    <div class="column" style="font-size:20px; width:15px">4</div>
                    <div class="column" style="font-size:20px; width:15px">5</div>
                    <div class="clearfix"></div>
                    <hr style="float:left; width:90px; height:2px; border-width:0; background-color:white">
                    </span>
                    `;
                }
                document.getElementById("bentuk-soal").style.display = 'block';
            } else {
                document.getElementById("bentuk-soal").style.display = 'none';
            }

            
			

            // MathJax.typeset();
            try {
                MathJax.typeset();
            } catch(err) {}
            
            var tipe = document.getElementById("tipe");
            var tipe2 = tipe.options[tipe.selectedIndex];
            
            // var j_pilihan = document.getElementById("jumlah-pilihan");
            // j_pilihan2 = parseInt(j_pilihan.options[j_pilihan.selectedIndex].innerHTML);
			j_pilihan2 = parseInt(document.getElementById("jumlah-pilihan").value);
            // console.log(j_pilihan2)

            var waktu_timer = parseInt(document.getElementById("waktu").value);
            // console.log(waktu_timer);

            d2 = new Date();
            time2 = d2.getTime();
            interval = 200;

            if (waktu_timer == 0) {
                document.getElementById('timer').style.display = 'none';
                waktu_check = true;
            } else {
                document.getElementById('timer').style.display = 'block';
                waktu_check = false;
            }

            if (waktu_timer == 1) {
                document.getElementById('waktu-timer').style.display = 'block';
                // document.getElementById('timer-icon').style.left = '650px';
				// document.getElementById('timer-icon').style.marginLeft = '550px';
                waktu_timer = document.getElementById('waktu2').value;
            } else {
                document.getElementById('waktu-timer').style.display = 'none';
                // document.getElementById('timer-icon').style.left = '400px';
				// document.getElementById('timer-icon').style.marginLeft = '300px';
            }
			
			// if (document.getElementById("tipe").value == 'pg') {
			if (document.getElementById("tipe").value == 'is') {
			    document.getElementById('opsi-pilihan').style.display = 'none';
				document.getElementById('opsi-pilihan2').style.display = 'none';
			} else {
			    document.getElementById('opsi-pilihan').style.display = 'block';
				if (document.getElementById("tipe").value == 'pgk') document.getElementById('opsi-pilihan2').style.display = 'block';
				else document.getElementById('opsi-pilihan2').style.display = 'none';
			}

            // myInterval = "";
            // var myInterval;
            // clearInterval(myInterval);
            // document.getElementById('timer').innerHTML = `${waktu_timer} detik`;
            waktu_teks = `Sisa waktu:<br><span style="font-size:24px; line-height:40px;">`;

            if (waktu_timer < 60) {
                waktu_teks += `${waktu_timer} detik`;
            } else if (waktu_timer % 60 < 1) {
                waktu_teks += `${Math.floor(waktu_timer/60)} menit`;
            } else {
                waktu_teks += `${Math.floor(waktu_timer/60)} menit ${waktu_timer % 60} detik`;
            }

            waktu_teks += "</span><br>";
			waktu_teks += `<div style="background-color:gray; position:absolute; width:300px; height:5px;"></div><div style="background-color:#80ff80; position:absolute; width:300px; height:5px;"></div>`;
			
            document.getElementById('timer').innerHTML = waktu_teks;

            myInterval = setInterval(function() {
                d3 = new Date();
                time3 = d3.getTime();
                waktu_timer = parseInt(document.getElementById("waktu").value);
                // console.log(waktu_timer);
                if (waktu_timer == 1) {
                    waktu_timer = parseInt(document.getElementById('waktu2').value);
                    if (isNaN(waktu_timer)) {
                        waktu_timer = 0;
                    }
                    // console.log(waktu_timer);
                }
                // console.log(waktu_timer);
                // console.log(time2,time3,waktu_timer);
                waktu2 = parseInt(Math.min(waktu_timer,Math.max(0,(time2-time3)/1000+waktu_timer+1)));
                // waktu_teks = `Waktu: ${waktu2} detik`;

                waktu_teks = `Sisa waktu:<br><span style="font-size:24px; line-height:40px;">`;

                if (waktu2 < 60) {
                    waktu_teks += `${waktu2} detik`;
                } else if (waktu2 % 60 < 1) {
                    waktu_teks += `${Math.floor(waktu2/60)} menit`;
                } else {
                    waktu_teks += `${Math.floor(waktu2/60)} menit ${waktu2 % 60} detik`;
                }

                waktu_teks += "</span>";
                waktu_teks += `<div style="background-color:gray; position:absolute; width:300px; height:5px;"></div><div style="background-color:#80ff80; position:absolute; width:${300*waktu2/waktu_timer}px; height:5px;"></div>`;

                document.getElementById('timer').innerHTML = waktu_teks;

                if (waktu_timer > 0 & waktu2 == 0) {
                    document.getElementById('tipe2').style.display = 'none';
					// attempt_check = false;
					off_check = true;
					try {
						document.getElementById("myCanvas").click();
					} catch(err) {}
                }
            }, interval);
			
			if (waktu_timer > 0 & waktu2 == 0) {
				// document.getElementById('tipe2').style.display = 'none';
				clearInterval(myInterval);
				// if (document.getElementById('suara').checked) {
					// speak("Waktunya habis");
				// }
			}
            function shuffleArray(array) {
                for (let i = array.length - 1; i >= 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }
            
            try {MathJax.typeset();} catch(err) {}
        }
		
		function selesaikan() {
            var tipe = document.getElementById("tipe");
            var tipe2 = tipe.options[tipe.selectedIndex];

            if (document.getElementById('check2').checked) {
                document.getElementById('tipe2').style.display = 'none';
            }

            if (tipe2.index == 0) {
                var angka_awal = document.getElementById('angka').value;
            } else {
                if (document.getElementById("pilihan1").checked) {
                    var angka_awal = document.getElementById('pilihan1').value;
                } else if (document.getElementById("pilihan2").checked) {
                    var angka_awal = document.getElementById('pilihan2').value;
                } else if (document.getElementById("pilihan3").checked) {
                    var angka_awal = document.getElementById('pilihan3').value;
                } else if (j_pilihan2 >= 4 && document.getElementById("pilihan4").checked) {
                    var angka_awal = document.getElementById('pilihan4').value;
                } else if (j_pilihan2 >= 5 && document.getElementById("pilihan5").checked) {
                    var angka_awal = document.getElementById('pilihan5').value;
				} else if (j_pilihan2 >= 6 && document.getElementById("pilihan6").checked) {
                    var angka_awal = document.getElementById('pilihan6').value;
                } else {
                    var angka_awal = '';
                }
            }
            if (angka_awal != '') {
                var e = document.getElementById("bentuk");
                var e1 = e.options[e.selectedIndex];
				// if (true) {
				if ((e1.index == 0 && [0,1,2,3].includes(e1_bentuk.index)) || (e1.index == 1 && [0,1,4,5].includes(e1_bentuk.index)) || e1.index == 2) {
                    angka = parseInt(angka_awal);
                    jawaban_check = angka == hasil;
                } else if (e1.index == 0 && e1_bentuk.index == 4) {
					angka = angka_awal;
                    jawaban_check = angka == hasil;
                } else {
                    angka = angka_awal.toLowerCase();
                    hasil = hasil.toLowerCase();
                    jawaban_check = angka == hasil;
                }
                // if (e1.index == 0) {
                //     tanda = ' + ';
                var jawaban_teks, jawaban_teks2;
                // if (cerita_check.checked == true) {
				if (true) {
                    // soal = '';
                    soal_check = false;
                }
                // if (soal2 = '') soal2 = soal;
                // if (angka == hasil) {
                if (jawaban_check) {
                    // jawaban_teks = `Jawabannya benar<br><br> ${soal} = ${hasil2}`;
                    if (soal_check) {
                        jawaban_teks = `Jawabannya benar<br><br>${soal} = ${angka_awal}`;
                    } else {
                        jawaban_teks = `Jawabannya benar<br><br>Hasil = ${angka_awal}`;
                    }
                    jawaban_teks2 = 'Jawabannya benar';
                } else {
                    // jawaban_teks = `Jawabannya salah<br>Jawaban yang diinput: ${angka}<br><br>${soal} = ${hasil2}`;
                    if (soal_check) {
                        jawaban_teks = `Jawabannya salah<br>Jawaban yang diinput = ${angka_awal}<br><br>${soal} = ${hasil2}`;
                    } else {
                        jawaban_teks = `Jawabannya salah<br>Jawaban yang diinput = ${angka_awal}<br><br>Jawaban yang benar = ${hasil2}`;
                    }
                    jawaban_teks2 = 'Jawabannya salah';
                }
                document.getElementById('jawaban').innerHTML = jawaban_teks;
                if (document.getElementById('suara').checked) {
                    speak(jawaban_teks2);
                }
            } else {
                document.getElementById('jawaban').innerHTML = 'Input angka harus diisi';
            }
        }
	</script>
</body>
</html>